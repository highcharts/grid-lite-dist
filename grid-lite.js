!/**
 * Highcharts Grid v2.0.0 (2025-10-28)
 * @module grid/grid-lite
 *
 * (c) 2009-2025 Highsoft AS
 *
 * License: www.highcharts.com/license
 */function(t,e){"object"==typeof exports&&"object"==typeof module?(t._Grid=e(),module.exports=t._Grid):"function"==typeof define&&define.amd?define("grid/grid-lite",[],e):"object"==typeof exports?(t._Grid=e(),exports["grid/grid-lite"]=t._Grid):(t.Grid&&t.Grid.error(16,!0),t.Grid=e())}("undefined"==typeof window?this:window,()=>(()=>{"use strict";let t;var e,i,s,n,r,o,l,a,h,d,u={};u.d=(t,e)=>{for(var i in e)u.o(e,i)&&!u.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},u.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var c={};u.d(c,{default:()=>s$}),function(t){t.SVG_NS="http://www.w3.org/2000/svg",t.product="Highcharts",t.version="2.0.0",t.win="undefined"!=typeof window?window:{},t.doc=t.win.document,t.svg=!!t.doc?.createElementNS?.(t.SVG_NS,"svg")?.createSVGRect,t.pageLang=t.doc?.documentElement?.closest("[lang]")?.lang,t.userAgent=t.win.navigator?.userAgent||"",t.isChrome=t.win.chrome,t.isFirefox=-1!==t.userAgent.indexOf("Firefox"),t.isMS=/(edge|msie|trident)/i.test(t.userAgent)&&!t.win.opera,t.isSafari=!t.isChrome&&-1!==t.userAgent.indexOf("Safari"),t.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(t.userAgent),t.isWebKit=-1!==t.userAgent.indexOf("AppleWebKit"),t.deg2rad=2*Math.PI/360,t.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],t.noop=function(){},t.supportsPassiveEvents=function(){let e=!1;if(!t.isMS){let i=Object.defineProperty({},"passive",{get:function(){e=!0}});t.win.addEventListener&&t.win.removeEventListener&&(t.win.addEventListener("testPassive",t.noop,i),t.win.removeEventListener("testPassive",t.noop,i))}return e}(),t.charts=[],t.composed=[],t.dateFormats={},t.seriesTypes={},t.symbolSizes={},t.chartCount=0}(e||(e={}));let m=e,{charts:p,doc:g,win:f}=m;function y(t,e,i,s){let n=e?"Highcharts error":"Highcharts warning";32===t&&(t=`${n}: Deprecated member`);let r=x(t),o=r?`${n} #${t}: www.highcharts.com/errors/${t}/`:t.toString();if(void 0!==s){let t="";r&&(o+="?"),D(s,function(e,i){t+=`
 - ${i}: ${e}`,r&&(o+=encodeURI(i)+"="+encodeURI(e))}),o+=t}H(m,"displayError",{chart:i,code:t,message:o,params:s},function(){if(e)throw Error(o);f.console&&-1===y.messages.indexOf(o)&&console.warn(o)}),y.messages.push(o)}function w(t,e){return parseInt(t,e||10)}function b(t){return"string"==typeof t}function v(t){let e=Object.prototype.toString.call(t);return"[object Array]"===e||"[object Array Iterator]"===e}function C(t,e){return!!t&&"object"==typeof t&&(!e||!v(t))}function E(t){return C(t)&&"number"==typeof t.nodeType}function T(t){let e=t?.constructor;return!!(C(t,!0)&&!E(t)&&e?.name&&"Object"!==e.name)}function x(t){return"number"==typeof t&&!isNaN(t)&&t<1/0&&t>-1/0}function S(t){return null!=t}function M(t,e,i){let s,n=b(e)&&!S(i),r=(e,i)=>{S(e)?t.setAttribute(i,e):n?(s=t.getAttribute(i))||"class"!==i||(s=t.getAttribute(i+"Name")):t.removeAttribute(i)};return b(e)?r(i,e):D(e,r),s}function N(t){return v(t)?t:[t]}function L(t,e){let i;for(i in t||(t={}),e)t[i]=e[i];return t}function O(){let t=arguments,e=t.length;for(let i=0;i<e;i++){let e=t[i];if(null!=e)return e}}function R(t,e){L(t.style,e)}function A(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function I(t,e){return t>1e14?t:parseFloat(t.toPrecision(e||14))}(y||(y={})).messages=[],Math.easeInOutSine=function(t){return -.5*(Math.cos(Math.PI*t)-1)};let P=Array.prototype.find?function(t,e){return t.find(e)}:function(t,e){let i,s=t.length;for(i=0;i<s;i++)if(e(t[i],i))return t[i]};function D(t,e,i){for(let s in t)Object.hasOwnProperty.call(t,s)&&e.call(i||t[s],t[s],s,t)}function k(t,e,i){function s(e,i){let s=t.removeEventListener;s&&s.call(t,e,i,!1)}function n(i){let n,r;t.nodeName&&(e?(n={})[e]=!0:n=i,D(n,function(t,e){if(i[e])for(r=i[e].length;r--;)s(e,i[e][r].fn)}))}let r="function"==typeof t&&t.prototype||t;if(Object.hasOwnProperty.call(r,"hcEvents")){let t=r.hcEvents;if(e){let r=t[e]||[];i?(t[e]=r.filter(function(t){return i!==t.fn}),s(e,i)):(n(t),t[e]=[])}else n(t),delete r.hcEvents}}function H(t,e,i,s){if(i=i||{},g?.createEvent&&(t.dispatchEvent||t.fireEvent&&t!==m)){let s=g.createEvent("Events");s.initEvent(e,!0,!0),i=L(s,i),t.dispatchEvent?t.dispatchEvent(i):t.fireEvent(e,i)}else if(t.hcEvents){i.target||L(i,{preventDefault:function(){i.defaultPrevented=!0},target:t,type:e});let s=[],n=t,r=!1;for(;n.hcEvents;)Object.hasOwnProperty.call(n,"hcEvents")&&n.hcEvents[e]&&(s.length&&(r=!0),s.unshift.apply(s,n.hcEvents[e])),n=Object.getPrototypeOf(n);r&&s.sort((t,e)=>t.order-e.order),s.forEach(e=>{!1===e.fn.call(t,i)&&i.preventDefault()})}s&&!i.defaultPrevented&&s.call(t,i)}let z=function(){let e=Math.random().toString(36).substring(2,9)+"-",i=0;return function(){return"highcharts-"+(t?"":e)+i++}}();f.jQuery&&(f.jQuery.fn.highcharts=function(){let t=[].slice.call(arguments);if(this[0])return t[0]?(new m[b(t[0])?t.shift():"Chart"](this[0],t[0],t[1]),this):p[M(this[0],"data-highcharts-chart")]});let B={addEvent:function(t,e,i,s={}){let n="function"==typeof t&&t.prototype||t;Object.hasOwnProperty.call(n,"hcEvents")||(n.hcEvents={});let r=n.hcEvents;m.Point&&t instanceof m.Point&&t.series&&t.series.chart&&(t.series.chart.runTrackerClick=!0);let o=t.addEventListener;o&&o.call(t,e,i,!!m.supportsPassiveEvents&&{passive:void 0===s.passive?-1!==e.indexOf("touch"):s.passive,capture:!1}),r[e]||(r[e]=[]);let l={fn:i,order:"number"==typeof s.order?s.order:1/0};return r[e].push(l),r[e].sort((t,e)=>t.order-e.order),function(){k(t,e,i)}},arrayMax:function(t){let e=t.length,i=t[0];for(;e--;)t[e]>i&&(i=t[e]);return i},arrayMin:function(t){let e=t.length,i=t[0];for(;e--;)t[e]<i&&(i=t[e]);return i},attr:M,clamp:function(t,e,i){return t>e?t<i?t:i:e},clearTimeout:function(t){S(t)&&clearTimeout(t)},correctFloat:I,createElement:function(t,e,i,s,n){let r=g.createElement(t);return e&&L(r,e),n&&R(r,{padding:"0",border:"none",margin:"0"}),i&&R(r,i),s&&s.appendChild(r),r},crisp:function(t,e=0,i){let s=e%2/2,n=i?-1:1;return(Math.round(t*n-s)+s)*n},css:R,defined:S,destroyObjectProperties:function(t,e,i){D(t,function(s,n){s!==e&&s?.destroy&&s.destroy(),(s?.destroy||!i)&&delete t[n]})},diffObjects:function(t,e,i,s){let n={};return!function t(e,n,r,o){let l=i?n:e;D(e,function(i,a){if(!o&&s&&s.indexOf(a)>-1&&n[a]){i=N(i),r[a]=[];for(let e=0;e<Math.max(i.length,n[a].length);e++)n[a][e]&&(void 0===i[e]?r[a][e]=n[a][e]:(r[a][e]={},t(i[e],n[a][e],r[a][e],o+1)))}else C(i,!0)&&!i.nodeType?(r[a]=v(i)?[]:{},t(i,n[a]||{},r[a],o+1),0===Object.keys(r[a]).length&&("colorAxis"!==a||0!==o)&&delete r[a]):(e[a]!==n[a]||a in e&&!(a in n))&&"__proto__"!==a&&"constructor"!==a&&(r[a]=l[a])})}(t,e,n,0),n},discardElement:function(t){t?.parentElement?.removeChild(t)},erase:function(t,e){let i=t.length;for(;i--;)if(t[i]===e){t.splice(i,1);break}},error:y,extend:L,extendClass:function(t,e){let i=function(){};return i.prototype=new t,L(i.prototype,e),i},find:P,fireEvent:H,getAlignFactor:(t="")=>({center:.5,right:1,middle:.5,bottom:1})[t]||0,getClosestDistance:function(t,e){let i,s,n,r,o=!e;return t.forEach(t=>{if(t.length>1)for(r=s=t.length-1;r>0;r--)(n=t[r]-t[r-1])<0&&!o?(e?.(),e=void 0):n&&(void 0===i||n<i)&&(i=n)}),i},getMagnitude:A,getNestedProperty:function(t,e){let i=t.split(".");for(;i.length&&S(e);){let t=i.shift();if(void 0===t||"__proto__"===t)return;if("this"===t){let t;return C(e)&&(t=e["@this"]),t??e}let s=e[t.replace(/[\\'"]/g,"")];if(!S(s)||"function"==typeof s||"number"==typeof s.nodeType||s===f)return;e=s}return e},getStyle:function t(e,i,s){let n;if("width"===i){let i=Math.min(e.offsetWidth,e.scrollWidth),s=e.getBoundingClientRect?.().width;return s<i&&s>=i-1&&(i=Math.floor(s)),Math.max(0,i-(t(e,"padding-left",!0)||0)-(t(e,"padding-right",!0)||0))}if("height"===i)return Math.max(0,Math.min(e.offsetHeight,e.scrollHeight)-(t(e,"padding-top",!0)||0)-(t(e,"padding-bottom",!0)||0));let r=f.getComputedStyle(e,void 0);return r&&(n=r.getPropertyValue(i),O(s,"opacity"!==i)&&(n=w(n))),n},insertItem:function(t,e){let i,s=t.options.index,n=e.length;for(i=t.options.isInternal?n:0;i<n+1;i++)if(!e[i]||x(s)&&s<O(e[i].options.index,e[i]._i)||e[i].options.isInternal){e.splice(i,0,t);break}return i},isArray:v,isClass:T,isDOMElement:E,isFunction:function(t){return"function"==typeof t},isNumber:x,isObject:C,isString:b,merge:function(t,...e){let i,s=[t,...e],n={},r=function(t,e){return"object"!=typeof t&&(t={}),D(e,function(i,s){"__proto__"!==s&&"constructor"!==s&&(!C(i,!0)||T(i)||E(i)?t[s]=e[s]:t[s]=r(t[s]||{},i))}),t};!0===t&&(n=s[1],s=Array.prototype.slice.call(s,2));let o=s.length;for(i=0;i<o;i++)n=r(n,s[i]);return n},normalizeTickInterval:function(t,e,i,s,n){let r,o=t;i=O(i,A(t));let l=t/i;for(!e&&(e=n?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===s&&(1===i?e=e.filter(function(t){return t%1==0}):i<=.1&&(e=[1/i]))),r=0;r<e.length&&(o=e[r],(!n||!(o*i>=t))&&(n||!(l<=(e[r]+(e[r+1]||e[r]))/2)));r++);return I(o*i,-Math.round(Math.log(.001)/Math.LN10))},objectEach:D,offset:function(t){let e=g.documentElement,i=t.parentElement||t.parentNode?t.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:i.top+(f.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(f.pageXOffset||e.scrollLeft)-(e.clientLeft||0),width:i.width,height:i.height}},pad:function(t,e,i){return Array((e||2)+1-String(t).replace("-","").length).join(i||"0")+t},pick:O,pInt:w,pushUnique:function(t,e){return 0>t.indexOf(e)&&!!t.push(e)},relativeLength:function(t,e,i){return/%$/.test(t)?e*parseFloat(t)/100+(i||0):parseFloat(t)},removeEvent:k,replaceNested:function(t,...e){let i,s;do for(s of(i=t,e))t=t.replace(s[0],s[1]);while(t!==i);return t},splat:N,stableSort:function(t,e){let i,s,n=t.length;for(s=0;s<n;s++)t[s].safeI=s;for(t.sort(function(t,s){return 0===(i=e(t,s))?t.safeI-s.safeI:i}),s=0;s<n;s++)delete t[s].safeI},syncTimeout:function(t,e,i){return e>0?setTimeout(t,e,i):(t.call(0,i),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ucfirst:function(t){return b(t)?t.substring(0,1).toUpperCase()+t.substring(1):String(t)},uniqueKey:z,useSerialIds:function(e){return t=O(e,t)},wrap:function(t,e,i){let s=t[e];t[e]=function(){let t=arguments,e=this;return i.apply(this,[function(){return s.apply(e,arguments.length?arguments:t)}].concat([].slice.call(arguments)))}}},{SVG_NS:F,win:W}=m,{attr:j,createElement:U,css:q,error:Y,isFunction:V,isString:$,objectEach:_,splat:G}=B,{trustedTypes:K}=W,Z=K&&V(K.createPolicy)&&K.createPolicy("highcharts",{createHTML:t=>t}),X=Z?Z.createHTML(""):"";class J{static filterUserAttributes(t){return _(t,(e,i)=>{let s=!0;-1===J.allowedAttributes.indexOf(i)&&(s=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(i)&&(s=$(e)&&J.allowedReferences.some(t=>0===e.indexOf(t))),s||(Y(33,!1,void 0,{"Invalid attribute in config":`${i}`}),delete t[i]),$(e)&&t[i]&&(t[i]=e.replace(/</g,"&lt;"))}),t}static parseStyle(t){return t.split(";").reduce((t,e)=>{let i=e.split(":").map(t=>t.trim()),s=i.shift();return s&&i.length&&(t[s.replace(/-([a-z])/g,t=>t[1].toUpperCase())]=i.join(":")),t},{})}static setElementHTML(t,e){t.innerHTML=J.emptyHTML,e&&new J(e).addToDOM(t)}constructor(t){this.nodes="string"==typeof t?this.parseMarkup(t):t}addToDOM(t){return function t(e,i){let s;return G(e).forEach(function(e){let n,r=e.tagName,o=e.textContent?m.doc.createTextNode(e.textContent):void 0,l=J.bypassHTMLFiltering;if(r)if("#text"===r)n=o;else if(-1!==J.allowedTags.indexOf(r)||l){let s="svg"===r?F:i.namespaceURI||F,a=m.doc.createElementNS(s,r),h=e.attributes||{};_(e,function(t,e){"tagName"!==e&&"attributes"!==e&&"children"!==e&&"style"!==e&&"textContent"!==e&&(h[e]=t)}),j(a,l?h:J.filterUserAttributes(h)),e.style&&q(a,e.style),o&&a.appendChild(o),t(e.children||[],a),n=a}else Y(33,!1,void 0,{"Invalid tagName in config":r});n&&i.appendChild(n),s=n}),s}(this.nodes,t)}parseMarkup(t){let e,i=[];t=t.trim().replace(/ style=(["'])/g," data-style=$1");try{e=new DOMParser().parseFromString(Z?Z.createHTML(t):t,"text/html")}catch{}if(!e){let i=U("div");i.innerHTML=t,e={body:i}}let s=(t,e)=>{let i=t.nodeName.toLowerCase(),n={tagName:i};"#text"===i&&(n.textContent=t.textContent||"");let r=t.attributes;if(r){let t={};[].forEach.call(r,e=>{"data-style"===e.name?n.style=J.parseStyle(e.value):t[e.name]=e.value}),n.attributes=t}if(t.childNodes.length){let e=[];[].forEach.call(t.childNodes,t=>{s(t,e)}),e.length&&(n.children=e)}e.push(n)};return[].forEach.call(e.body.childNodes,t=>s(t,i)),i}}J.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","disabled","dx","dy","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","result","role","rowspan","scope","slope","src","startOffset","stdDeviation","stroke-linecap","stroke-width","stroke","style","summary","tabindex","tableValues","target","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],J.allowedReferences=["https://","http://","mailto:","/","../","./","#"],J.allowedTags=["#text","a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","tbody","td","text","textPath","th","thead","title","tr","tspan","u","ul"],J.emptyHTML=X,J.bypassHTMLFiltering=!1;let{pageLang:Q,win:tt}=m,{defined:te,error:ti,extend:ts,isNumber:tn,isObject:tr,isString:to,merge:tl,objectEach:ta,pad:th,splat:td,timeUnits:tu,ucfirst:tc}=B,tm=m.isSafari&&tt.Intl&&!tt.Intl.DateTimeFormat.prototype.formatRange,tp=class{constructor(t,e){this.options={timezone:"UTC"},this.variableTimezone=!1,this.Date=tt.Date,this.update(t),this.lang=e}update(t={}){this.dTLCache={},this.options=t=tl(!0,this.options,t);let{timezoneOffset:e,useUTC:i,locale:s}=t;this.Date=t.Date||tt.Date||Date;let n=t.timezone;te(i)&&(n=i?"UTC":void 0),e&&e%60==0&&(n="Etc/GMT"+(e>0?"+":"")+e/60),this.variableTimezone="UTC"!==n&&n?.indexOf("Etc/GMT")!==0,this.timezone=n,this.lang&&s&&(this.lang.locale=s),["months","shortMonths","weekdays","shortWeekdays"].forEach(t=>{let e=/months/i.test(t),i=/short/.test(t),s={timeZone:"UTC"};s[e?"month":"weekday"]=i?"short":"long",this[t]=(e?[0,1,2,3,4,5,6,7,8,9,10,11]:[3,4,5,6,7,8,9]).map(t=>this.dateFormat(s,(e?31:1)*24*36e5*t))})}toParts(t){let[e,i,s,n,r,o,l]=this.dateTimeFormat({weekday:"narrow",day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},t,"es").split(/(?:, | |\/|:)/g);return[n,s-1,i,r,o,l,Math.floor(Number(t)||0)%1e3,"DLMXJVS".indexOf(e)].map(Number)}dateTimeFormat(t,e,i=this.options.locale||Q){let s=JSON.stringify(t)+i;to(t)&&(t=this.str2dtf(t));let n=this.dTLCache[s];if(!n){t.timeZone??(t.timeZone=this.timezone);try{n=new Intl.DateTimeFormat(i,t)}catch(e){/Invalid time zone/i.test(e.message)?(ti(34),t.timeZone="UTC",n=new Intl.DateTimeFormat(i,t)):ti(e.message,!1)}}return this.dTLCache[s]=n,n?.format(e)||""}str2dtf(t,e={}){let i={L:{fractionalSecondDigits:3},S:{second:"2-digit"},M:{minute:"numeric"},H:{hour:"2-digit"},k:{hour:"numeric"},E:{weekday:"narrow"},a:{weekday:"short"},A:{weekday:"long"},d:{day:"2-digit"},e:{day:"numeric"},b:{month:"short"},B:{month:"long"},m:{month:"2-digit"},o:{month:"numeric"},y:{year:"2-digit"},Y:{year:"numeric"}};return Object.keys(i).forEach(s=>{-1!==t.indexOf(s)&&ts(e,i[s])}),e}makeTime(t,e,i=1,s=0,n,r,o){let l=this.Date.UTC(t,e,i,s,n||0,r||0,o||0);if("UTC"!==this.timezone){let t=this.getTimezoneOffset(l);if(l+=t,-1!==[2,3,8,9,10,11].indexOf(e)&&(s<5||s>20)){let e=this.getTimezoneOffset(l);t!==e?l+=e-t:t-36e5!==this.getTimezoneOffset(l-36e5)||tm||(l-=36e5)}}return l}parse(t){if(!to(t))return t??void 0;let e=(t=t.replace(/\//g,"-").replace(/(GMT|UTC)/,"")).indexOf("Z")>-1||/([+-][0-9]{2}):?[0-9]{2}$/.test(t),i=/^[0-9]{4}-[0-9]{2}(-[0-9]{2}|)$/.test(t);e||i||(t+="Z");let s=Date.parse(t);if(tn(s))return s+(!e||i?this.getTimezoneOffset(s):0)}getTimezoneOffset(t){if("UTC"!==this.timezone){let[e,i,s,n,r=0]=this.dateTimeFormat({timeZoneName:"shortOffset"},t,"en").split(/(GMT|:)/).map(Number),o=-(60*(s+r/60)*6e4);if(tn(o))return o}return 0}dateFormat(t,e,i){let s=this.lang;if(!te(e)||isNaN(e))return s?.invalidDate||"";if(to(t=t??"%Y-%m-%d %H:%M:%S")){let i,n=/%\[([a-zA-Z]+)\]/g;for(;i=n.exec(t);)t=t.replace(i[0],this.dateTimeFormat(i[1],e,s?.locale))}if(to(t)&&-1!==t.indexOf("%")){let i=this,[n,r,o,l,a,h,d,u]=this.toParts(e),c=s?.weekdays||this.weekdays,p=s?.shortWeekdays||this.shortWeekdays,g=s?.months||this.months,f=s?.shortMonths||this.shortMonths;ta(ts({a:p?p[u]:c[u].substr(0,3),A:c[u],d:th(o),e:th(o,2," "),w:u,v:s?.weekFrom??"",b:f[r],B:g[r],m:th(r+1),o:r+1,y:n.toString().substr(2,2),Y:n,H:th(l),k:l,I:th(l%12||12),l:l%12||12,M:th(a),p:l<12?"AM":"PM",P:l<12?"am":"pm",S:th(h),L:th(d,3)},m.dateFormats),function(s,n){if(to(t))for(;-1!==t.indexOf("%"+n);)t=t.replace("%"+n,"function"==typeof s?s.call(i,e):s)})}else if(tr(t)){let i=(this.getTimezoneOffset(e)||0)/36e5,s=this.timezone||"Etc/GMT"+(i>=0?"+":"")+i,{prefix:n="",suffix:r=""}=t;t=n+this.dateTimeFormat(ts({timeZone:s},t),e)+r}return i?tc(t):t}resolveDTLFormat(t){return tr(t,!0)?tr(t,!0)&&void 0===t.main?{main:t}:t:{main:(t=td(t))[0],from:t[1],to:t[2]}}getDateFormat(t,e,i,s){let n=this.dateFormat("%m-%d %H:%M:%S.%L",e),r="01-01 00:00:00.000",o={millisecond:15,second:12,minute:9,hour:6,day:3},l="millisecond",a=l;for(l in tu){if(t&&t===tu.week&&+this.dateFormat("%w",e)===i&&n.substr(6)===r.substr(6)){l="week";break}if(t&&tu[l]>t){l=a;break}if(o[l]&&n.substr(o[l])!==r.substr(o[l]))break;"week"!==l&&(a=l)}return this.resolveDTLFormat(s[l]).main}},{defined:tg,extend:tf,timeUnits:ty}=B,tw=class extends tp{getTimeTicks(t,e,i,s){let n=this,r=[],o={},{count:l=1,unitRange:a}=t,[h,d,u,c,m,p]=n.toParts(e),g=(e||0)%1e3,f;if(s??(s=1),tg(e)){if(g=a>=ty.second?0:l*Math.floor(g/l),a>=ty.second&&(p=a>=ty.minute?0:l*Math.floor(p/l)),a>=ty.minute&&(m=a>=ty.hour?0:l*Math.floor(m/l)),a>=ty.hour&&(c=a>=ty.day?0:l*Math.floor(c/l)),a>=ty.day&&(u=a>=ty.month?1:Math.max(1,l*Math.floor(u/l))),a>=ty.month&&(d=a>=ty.year?0:l*Math.floor(d/l)),a>=ty.year&&(h-=h%l),a===ty.week){l&&(e=n.makeTime(h,d,u,c,m,p,g));let t=this.dateTimeFormat({timeZone:this.timezone,weekday:"narrow"},e,"es"),i="DLMXJVS".indexOf(t);u+=-i+s+(i<s?-7:0)}e=n.makeTime(h,d,u,c,m,p,g),n.variableTimezone&&tg(i)&&(f=i-e>4*ty.month||n.getTimezoneOffset(e)!==n.getTimezoneOffset(i));let t=e,y=1;for(;t<i;)r.push(t),a===ty.year?t=n.makeTime(h+y*l,0):a===ty.month?t=n.makeTime(h,d+y*l):f&&(a===ty.day||a===ty.week)?t=n.makeTime(h,d,u+y*l*(a===ty.day?1:7)):f&&a===ty.hour&&l>1?t=n.makeTime(h,d,u,c+y*l):t+=a*l,y++;r.push(t),a<=ty.hour&&r.length<1e4&&r.forEach(t=>{t%18e5==0&&"000000000"===n.dateFormat("%H%M%S%L",t)&&(o[t]="day")})}return r.info=tf(t,{higherRanks:o,totalRange:a*l}),r}},{isTouchDevice:tb}=m,{fireEvent:tv,merge:tC}=B,tE={colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{weekFrom:"week from",chartTitle:"Chart title",locale:void 0,loading:"Loading...",months:void 0,seriesName:"Series {add index 1}",shortMonths:void 0,weekdays:void 0,numericSymbols:["k","M","G","T","P","E"],pieSliceName:"Slice",resetZoom:"Reset zoom",yAxisTitle:"Values",resetZoomTitle:"Reset zoom level 1:1"},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,timezone:"UTC",timezoneOffset:0,useUTC:void 0},chart:{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",margin:15,minScale:.67},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:""},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{color:"#333333",fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:t=>Math.sqrt(1-Math.pow(t-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%[AebHMSL]",second:"%[AebHMS]",minute:"%[AebHM]",hour:"%[AebHM]",day:"%[AebY]",week:"%v %[AebY]",month:"%[BY]",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,position:{x:0,y:3},shared:!1,snap:tb?25:10,headerFormat:'<span style="font-size: 0.8em">{ucfirst point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}},tT=new tw(tE.time,tE.lang),{defaultOptions:tx,defaultTime:tS}={defaultOptions:tE,defaultTime:tT,getOptions:function(){return tE},setOptions:function(t){return tv(m,"setOptions",{options:t}),tC(!0,tE,t),t.time&&tT.update(tE.time),t.lang&&"locale"in t.lang&&tT.update({locale:t.lang.locale}),t.lang?.chartTitle&&(tE.title={...tE.title,text:t.lang.chartTitle}),tE}},{pageLang:tM}=m,{extend:tN,getNestedProperty:tL,isArray:tO,isNumber:tR,isObject:tA,isString:tI,pick:tP,ucfirst:tD}=B,tk={add:(t,e)=>t+e,divide:(t,e)=>0!==e?t/e:"",eq:(t,e)=>t==e,each:function(t){let e=arguments[arguments.length-1];return!!tO(t)&&t.map((i,s)=>tB(e.body,tN(tA(i)?i:{"@this":i},{"@index":s,"@first":0===s,"@last":s===t.length-1}))).join("")},ge:(t,e)=>t>=e,gt:(t,e)=>t>e,if:t=>!!t,le:(t,e)=>t<=e,lt:(t,e)=>t<e,multiply:(t,e)=>t*e,ne:(t,e)=>t!=e,subtract:(t,e)=>t-e,ucfirst:tD,unless:t=>!t},tH={},tz=t=>/^["'].+["']$/.test(t);function tB(t="",e,i){let s=/\{([a-zA-Z\u00C0-\u017F\d:\.,;\-\/<>\[\]%_@+"'’= #\(\)]+)\}/g,n=/\(([a-zA-Z\u00C0-\u017F\d:\.,;\-\/<>\[\]%_@+"'= ]+)\)/g,r=[],o=/f$/,l=/\.(\d)/,a=i?.options?.lang||tx.lang,h=i?.time||tS,d=i?.numberFormatter||tF.bind(i),u=(t="")=>{let i;return"true"===t||"false"!==t&&((i=Number(t)).toString()===t?i:tz(t)?t.slice(1,-1):tL(t,e))},c,m,p=0,g;for(;null!==(c=s.exec(t));){let i=c,s=n.exec(c[1]);s&&(c=s,g=!0),m?.isBlock||(m={ctx:e,expression:c[1],find:c[0],isBlock:"#"===c[1].charAt(0),start:c.index,startInner:c.index+c[0].length,length:c[0].length});let o=(m.isBlock?i:c)[1].split(" ")[0].replace("#","");tk[o]&&(m.isBlock&&o===m.fn&&p++,m.fn||(m.fn=o));let l="else"===c[1];if(m.isBlock&&m.fn&&(c[1]===`/${m.fn}`||l))if(p)!l&&p--;else{let e=m.startInner,i=t.substr(e,c.index-e);void 0===m.body?(m.body=i,m.startInner=c.index+c[0].length):m.elseBody=i,m.find+=i+c[0],l||(r.push(m),m=void 0)}else m.isBlock||r.push(m);if(s&&!m?.isBlock)break}return r.forEach(s=>{let r,c,{body:m,elseBody:p,expression:g,fn:f}=s;if(f){let t=[s],n=[],o=g.length,l=0,a;for(c=0;c<=o;c++){let t=g.charAt(c);a||'"'!==t&&"'"!==t?a===t&&(a=""):a=t,a||" "!==t&&c!==o||(n.push(g.substr(l,c-l)),l=c+1)}for(c=tk[f].length;c--;)t.unshift(u(n[c+1]));r=tk[f].apply(e,t),s.isBlock&&"boolean"==typeof r&&(r=tB(r?m:p,e,i))}else{let t=tz(g)?[g]:g.split(":"),e=(r=u(t.shift()||""))%1!=0;if("number"==typeof r&&(t.length||e)){let i=t.join(":");if(o.test(i)||e){let t=parseInt((i.match(l)||["","-1"])[1],10);null!==r&&(r=d(r,t,a.decimalPoint,i.indexOf(",")>-1?a.thousandsSep:""))}else r=h.dateFormat(i,r)}n.lastIndex=0,n.test(s.find)&&tI(r)&&(r=`"${r}"`)}t=t.replace(s.find,tP(r,""))}),g?tB(t,e,i):t}function tF(t,e,i,s){e*=1;let n,r,[o,l]=(t=+t||0).toString().split("e").map(Number),a=this?.options?.lang||tx.lang,h=(t.toString().split(".")[1]||"").split("e")[0].length,d=e,u={};i??(i=a.decimalPoint),s??(s=a.thousandsSep),-1===e?e=Math.min(h,20):tR(e)?e&&l<0&&((r=e+l)>=0?(o=+o.toExponential(r).split("e")[0],e=r):(o=Math.floor(o),t=e<20?+(o*Math.pow(10,l)).toFixed(e):0,l=0)):e=2,l&&(e??(e=2),t=o),tR(e)&&e>=0&&(u.minimumFractionDigits=e,u.maximumFractionDigits=e),""===s&&(u.useGrouping=!1);let c=s||i,m=c?"en":this?.locale||a.locale||tM,p=JSON.stringify(u)+m;return n=(tH[p]??(tH[p]=new Intl.NumberFormat(m,u))).format(t),c&&(n=n.replace(/([,\.])/g,"_$1").replace(/_\,/g,s??",").replace("_.",i??".")),(e||0!=+n)&&(!(l<0)||d)||(n="0"),l&&0!=+n&&(n+="e"+(l<0?"":"+")+l),n}let tW={dateFormat:function(t,e,i){return tS.dateFormat(t,e,i)},format:tB,helpers:tk,numberFormat:tF},{getStyle:tj,defined:tU}=B;class tq{constructor(t){this.columnWidths={},this.columnWidthUnits={},this.viewport=t}getColumnWidth(t){let e=this.viewport,i=this.columnWidths[t.id],s=tq.getMinWidth(t);if(!tU(i)){let t=e.tbodyElement;return Math.max((t.getBoundingClientRect().width-this.calculateOccupiedWidth()-t.offsetWidth+t.clientWidth)/((e.grid.enabledColumns?.length||0)-Object.keys(this.columnWidths).length),s)}return 0===this.columnWidthUnits[t.id]?i:Math.max(e.getWidthFromRatio(i/100),s)}loadColumn(t){let e,i=t.options.width;if(!i)return;let s=0;"number"==typeof i?(e=i,s=0):(e=parseFloat(i),s=+("%"===i.charAt(i.length-1))),this.columnWidthUnits[t.id]=s,this.columnWidths[t.id]=e}loadColumns(){let{columns:t}=this.viewport;for(let e=0,i=t.length;e<i;++e)this.loadColumn(t[e])}reflow(){let t=this.viewport,e=0;for(let i=0,s=t.columns.length;i<s;++i)e+=this.getColumnWidth(t.columns[i]);t.rowsWidth=e}static getMinWidth(t){let e=t.cells[0]?.htmlElement,i=t.header?.htmlElement,s=t=>(tj(t,"padding-left",!0)||0)+(tj(t,"padding-right",!0)||0)+(tj(t,"border-left",!0)||0)+(tj(t,"border-right",!0)||0),n=tq.MIN_COLUMN_WIDTH;return e&&(n=Math.max(n,s(e))),i&&(n=Math.max(n,s(i))),n}calculateOccupiedWidth(){let t,e,i=this.viewport,s=0,n=Object.keys(this.columnWidths);for(let r=0,o=n.length;r<o;++r){if(e=n[r],0===this.columnWidthUnits[e]){s+=this.columnWidths[e];continue}t=this.columnWidths[e],s+=i.getWidthFromRatio(t/100)}return s}}tq.MIN_COLUMN_WIDTH=20;let tY=tq,tV=class extends tY{constructor(){super(...arguments),this.type="adjacent"}resize(t,e){let i=this.viewport,s=t.draggedColumn;if(!s)return;let n=t.columnStartWidth??0,r=tY.getMinWidth(s),o=i.columns[s.index+1],l=Math.round(10*Math.max(n+e,r))/10;if(this.columnWidths[s.id]=l,this.columnWidthUnits[s.id]=0,s.update({width:l},!1),o){let e=this.columnWidths[o.id]=Math.round(10*Math.max((t.nextColumnStartWidth??0)+n-l,r))/10;this.columnWidthUnits[o.id]=0,o.update({width:e},!1)}}},t$=class extends tY{constructor(){super(...arguments),this.type="independent"}resize(t,e){let i=t.draggedColumn;if(!i)return;let s=this.columnWidths[i.id]=Math.round(10*Math.max((t.columnStartWidth||0)+e,tY.getMinWidth(i)))/10;this.columnWidthUnits[i.id]=0;let n=this.viewport,r=i.index;for(let t=r;t<n.columns.length;++t){let e=n.columns[t],i=this.columnWidths[e.id]=e.getWidth();this.columnWidthUnits[e.id]=0,e.update({width:i},!1)}i.update({width:s},!1)}},t_=class extends tY{constructor(){super(...arguments),this.type="distributed"}resize(t,e){let i=t.draggedColumn;if(!i)return;let s=this.columnWidths[i.id]=Math.round(10*Math.max((t.columnStartWidth||0)+e,tY.getMinWidth(i)))/10;this.columnWidthUnits[i.id]=0,i.update({width:s},!1)}};!function(t){t.AbstractStrategy=tY,t.types={adjacent:tV,distributed:t_,independent:t$},t.initMode=function(e){let i=e.grid.options?.rendering?.columns?.resizing?.mode||"adjacent",s=t.types[i];return s||(console.warn(`Unknown column resizing mode: '${i}'. Applied default 'adjacent' mode.`),s=t.types.adjacent),new s(e)}}(i||(i={}));let tG=i,{addEvent:tK,fireEvent:tZ,merge:tX}=B;class tJ{benchmark(t,e){let i=[],s=this,n=()=>{s.modifyTable(t),s.emit({type:"afterBenchmarkIteration"})},{iterations:r}=tX({iterations:1},e);s.on("afterBenchmarkIteration",()=>{if(i.length===r)return void s.emit({type:"afterBenchmark",results:i});n()});let o={startTime:0,endTime:0};return s.on("modify",()=>{o.startTime=window.performance.now()}),s.on("afterModify",()=>{o.endTime=window.performance.now(),i.push(o.endTime-o.startTime)}),n(),i}emit(t){tZ(this,t.type,t)}modify(t,e){let i=this;return new Promise((s,n)=>{t.modified||(t.modified=t.clone(!1,e));try{s(i.modifyTable(t,e))}catch(s){i.emit({type:"error",detail:e,table:t}),n(s instanceof Error?s:Error(""+s))}})}on(t,e){return tK(this,t,e)}}!function(t){t.types={},t.registerType=function(e,i){return!!e&&!t.types[e]&&!!(t.types[e]=i)}}(tJ||(tJ={}));let tQ=tJ;!function(t){t.setLength=function(t,e,i){return Array.isArray(t)?(t.length=e,t):t[i?"subarray":"slice"](0,e)},t.splice=function(t,e,i,s,n=[]){if(Array.isArray(t))return Array.isArray(n)||(n=Array.from(n)),{removed:t.splice(e,i,...n),array:t};let r=Object.getPrototypeOf(t).constructor,o=t[s?"subarray":"slice"](e,e+i),l=new r(t.length-i+n.length);return l.set(t.subarray(0,e),0),l.set(n,e),l.set(t.subarray(e+i),e+n.length),{removed:o,array:l}},t.convertToNumber=function(t,e){switch(typeof t){case"boolean":return+!!t;case"number":return isNaN(t)&&!e?null:t;default:return isNaN(t=parseFloat(`${t??""}`))&&!e?null:t}}}(s||(s={}));let t0=s,{setLength:t1,splice:t3}=t0,{fireEvent:t6,objectEach:t2,uniqueKey:t5}=B,t7=class{constructor(t={}){this.autoId=!t.id,this.columns={},this.id=t.id||t5(),this.rowCount=0,this.versionTag=t5();let e=0;t2(t.columns||{},(t,i)=>{this.columns[i]=t.slice(),e=Math.max(e,t.length)}),this.applyRowCount(e)}applyRowCount(t){this.rowCount=t,t2(this.columns,(e,i)=>{e.length!==t&&(this.columns[i]=t1(e,t))})}deleteRows(t,e=1){if(e>0&&t<this.rowCount){let i=0;t2(this.columns,(s,n)=>{this.columns[n]=t3(s,t,e).array,i=s.length}),this.rowCount=i}t6(this,"afterDeleteRows",{rowIndex:t,rowCount:e}),this.versionTag=t5()}getColumn(t,e){return this.columns[t]}getColumns(t,e){return(t||Object.keys(this.columns)).reduce((t,e)=>(t[e]=this.columns[e],t),{})}getRow(t,e){return(e||Object.keys(this.columns)).map(e=>this.columns[e]?.[t])}setColumn(t,e=[],i=0,s){this.setColumns({[t]:e},i,s)}setColumns(t,e,i){let s=this.rowCount;t2(t,(t,e)=>{this.columns[e]=t.slice(),s=t.length}),this.applyRowCount(s),i?.silent||(t6(this,"afterSetColumns"),this.versionTag=t5())}setRow(t,e=this.rowCount,i,s){let{columns:n}=this,r=i?this.rowCount+1:e+1;t2(t,(t,o)=>{let l=n[o]||s?.addColumns!==!1&&Array(r);l&&(i?l=t3(l,e,0,!0,[t]).array:l[e]=t,n[o]=l)}),r>this.rowCount&&this.applyRowCount(r),s?.silent||(t6(this,"afterSetRows"),this.versionTag=t5())}getModified(){return this.modified||this}},{splice:t4,setLength:t9}=t0,{addEvent:t8,defined:et,extend:ee,fireEvent:ei,isNumber:es,uniqueKey:en}=B;class er extends t7{constructor(t={}){super(t),this.metadata=t.metadata}clone(t,e){let i={};this.emit({type:"cloneTable",detail:e}),t||(i.columns=this.columns),this.autoId||(i.id=this.id);let s=new er(i);return t||(s.versionTag=this.versionTag,s.originalRowIndexes=this.originalRowIndexes,s.localRowIndexes=this.localRowIndexes),this.emit({type:"afterCloneTable",detail:e,tableClone:s}),s}deleteColumns(t,e){let i=this.columns,s={},n={},r=this.modifier,o=this.rowCount;if((t=t||Object.keys(i)).length){this.emit({type:"deleteColumns",columnIds:t,detail:e});for(let e=0,r=t.length,l,a;e<r;++e)(l=i[a=t[e]])&&(s[a]=l,n[a]=Array(o)),delete i[a];return Object.keys(i).length||(this.rowCount=0,this.deleteRowIndexReferences()),r&&r.modifyTable(this),this.emit({type:"afterDeleteColumns",columns:s,columnIds:t,detail:e}),s}}deleteRowIndexReferences(){delete this.originalRowIndexes,delete this.localRowIndexes}deleteRows(t,e=1,i){let s=[],n=[],r=this.modifier;if(this.emit({type:"deleteRows",detail:i,rowCount:e,rowIndex:t||0}),void 0===t&&(t=0,e=this.rowCount),e>0&&t<this.rowCount){let i=this.columns,r=Object.keys(i);for(let o=0,l=r.length,a,h,d;o<l;++o){let u=t4(a=i[d=r[o]],t,e);h=u.removed,i[d]=a=u.array,o||(this.rowCount=a.length);for(let t=0,e=h.length;t<e;++t)s[t]=s[t]||[],s[t][o]=h[t];n.push(Array(l))}}return r&&r.modifyTable(this),this.emit({type:"afterDeleteRows",detail:i,rowCount:e,rowIndex:t||0,rows:s}),s}emit(t){["afterDeleteColumns","afterDeleteRows","afterSetCell","afterSetColumns","afterSetRows"].includes(t.type)&&(this.versionTag=en()),ei(this,t.type,t)}getCell(t,e){let i=this.columns[t];if(i)return i[e]}getColumn(t,e){return this.getColumns([t],e)[t]}getColumnIds(){return Object.keys(this.columns)}getColumns(t,e,i){let s=this.columns,n={};t=t||Object.keys(s);for(let r=0,o=t.length,l,a;r<o;++r)(l=s[a=t[r]])&&(e?n[a]=l:i&&!Array.isArray(l)?n[a]=Array.from(l):n[a]=l.slice());return n}getLocalRowIndex(t){let{localRowIndexes:e}=this;return e?e[t]:t}getModifier(){return this.modifier}getOriginalRowIndex(t){let{originalRowIndexes:e}=this;return e?e[t]:t}getRow(t,e){return this.getRows(t,1,e)[0]}getRowCount(){return this.rowCount}getRowIndexBy(t,e,i){let s=this.columns[t];if(s){let t=-1;if(Array.isArray(s)?t=s.indexOf(e,i):es(e)&&(t=s.indexOf(e,i)),-1!==t)return t}}getRowObject(t,e){return this.getRowObjects(t,1,e)[0]}getRowObjects(t=0,e=this.rowCount-t,i){let s=this.columns,n=Array(e);i=i||Object.keys(s);for(let r=t,o=0,l=Math.min(this.rowCount,t+e),a,h;r<l;++r,++o)for(let t of(h=n[o]={},i))a=s[t],h[t]=a?a[r]:void 0;return n}getRows(t=0,e=this.rowCount-t,i){let s=this.columns,n=Array(e);i=i||Object.keys(s);for(let r=t,o=0,l=Math.min(this.rowCount,t+e),a,h;r<l;++r,++o)for(let t of(h=n[o]=[],i))a=s[t],h.push(a?a[r]:void 0);return n}getVersionTag(){return this.versionTag}hasColumns(t){let e=this.columns;for(let i=0,s=t.length;i<s;++i)if(!e[t[i]])return!1;return!0}hasRowWith(t,e){let i=this.columns[t];return Array.isArray(i)?-1!==i.indexOf(e):!!(et(e)&&Number.isFinite(e))&&-1!==i.indexOf(+e)}on(t,e){return t8(this,t,e)}changeColumnId(t,e){let i=this.columns;return!!i[t]&&(t!==e&&(i[e]=i[t],delete i[t]),!0)}setCell(t,e,i,s){let n=this.columns,r=this.modifier,o=n[t];o&&o[e]===i||(this.emit({type:"setCell",cellValue:i,columnId:t,detail:s,rowIndex:e}),o||(o=n[t]=Array(this.rowCount)),e>=this.rowCount&&(this.rowCount=e+1),o[e]=i,r&&r.modifyTable(this),this.emit({type:"afterSetCell",cellValue:i,columnId:t,detail:s,rowIndex:e}))}setColumns(t,e,i,s){let n=this.columns,r=this.modifier,o=Object.keys(t),l=this.rowCount;if(this.emit({type:"setColumns",columns:t,columnIds:o,detail:i,rowIndex:e}),et(e)||s){for(let i=0,r=o.length,a,h,d,u;i<r;++i){a=t[d=o[i]],u=Object.getPrototypeOf((h=n[d])&&s?h:a).constructor,h?u===Array?Array.isArray(h)||(h=Array.from(h)):h.length<l&&(h=new u(l)).set(n[d]):h=new u(l),n[d]=h;for(let t=e||0,i=a.length;t<i;++t)h[t]=a[t];l=Math.max(l,a.length)}this.applyRowCount(l)}else super.setColumns(t,e,ee(i,{silent:!0}));r&&r.modifyTable(this),this.emit({type:"afterSetColumns",columns:t,columnIds:o,detail:i,rowIndex:e})}setModifier(t,e){let i=this;return i.emit({type:"setModifier",detail:e,modifier:t,modified:i.getModified()}),i.modifier=t,(t?t.modify(i):Promise.resolve(i)).then(i=>(i.emit({type:"afterSetModifier",detail:e,modifier:t,modified:i.getModified()}),i)).catch(e=>{throw i.emit({type:"setModifierError",error:e,modifier:t,modified:i.getModified()}),e})}setOriginalRowIndexes(t,e=!1){if(this.originalRowIndexes=t,e)return;let i=this.localRowIndexes=[];for(let e=0,s=t.length,n;e<s;++e)et(n=t[e])&&(i[n]=e)}setRow(t,e,i,s){this.setRows([t],e,i,s)}setRows(t,e=this.rowCount,i,s){let n=this.columns,r=Object.keys(n),o=this.modifier,l=t.length;this.emit({type:"setRows",detail:s,rowCount:l,rowIndex:e,rows:t});for(let s=0,o=e,a;s<l;++s,++o)if(0===Object.keys(a=t[s]).length)for(let t=0,e=r.length;t<e;++t){let e=n[r[t]];i?n[r[t]]=t4(e,o,0,!0,[null]).array:e[o]=null}else if(Array.isArray(a))for(let t=0,e=r.length;t<e;++t)n[r[t]][o]=a[t];else super.setRow(a,o,void 0,{silent:!0});let a=i?l+t.length:e+l;if(a>this.rowCount){this.rowCount=a;for(let t=0,e=r.length;t<e;++t){let e=r[t];n[e]=t9(n[e],a)}}o&&o.modifyTable(this),this.emit({type:"afterSetRows",detail:s,rowCount:l,rowIndex:e,rows:t})}}let{addEvent:eo,fireEvent:el,merge:ea,pick:eh}=B;class ed{get polling(){return!!this._polling}constructor(t){this.dataTables={},this.loaded=!1,this.metadata=t.metadata||{columns:{}},this.options=t;let e=t?.dataTables,i=0;if(t.options&&console.error("The `DataConnectorOptions.options` property was removed in Dashboards v4.0.0. Check how to upgrade your connector to use the new options structure here: https://api.highcharts.com/dashboards/#interfaces/Data_DataTableOptions.DataTableOptions-1"),e&&e?.length>0)for(let t=0,s=e.length;t<s;++t){let s=e[t],n=s?.key;this.dataTables[n??i]=new er(s),!n&&i++}else this.dataTables[0]=new er({id:t.id})}getTable(t){return t?this.dataTables[t]:Object.values(this.dataTables)[0]}describeColumn(t,e){let i=this.metadata.columns;i[t]=ea(i[t]||{},e)}describeColumns(t){let e,i=Object.keys(t);for(;"string"==typeof(e=i.pop());)this.describeColumn(e,t[e])}getColumnOrder(){let t=this.metadata.columns,e=Object.keys(t||{});if(e.length)return e.sort((e,i)=>eh(t[e].index,0)-eh(t[i].index,0))}getSortedColumns(){return this.getTable().getColumns(this.getColumnOrder())}setColumnOrder(t){for(let e=0,i=t.length;e<i;++e)this.describeColumn(t[e],{index:e})}load(){return this.emit({type:"afterLoad"}),Promise.resolve(this)}async applyTableModifiers(){let t=this.options?.dataTables;for(let[e,i]of Object.entries(this.dataTables)){let s=t?.find(t=>t.key===e)?.dataModifier??this.options?.dataModifier,n=s&&tQ.types[s.type];await i.setModifier(n?new n(s):void 0)}return this}startPolling(t=1e3){let e=this;this.pollingController=new AbortController,window.clearTimeout(e._polling),e._polling=window.setTimeout(()=>e.load().catch(t=>e.emit({type:"loadError",error:t})).then(()=>{e._polling&&e.startPolling(t)}),t)}stopPolling(){this.polling&&(this?.pollingController?.abort(),window.clearTimeout(this._polling),delete this._polling)}emit(t){el(this,t.type,t)}on(t,e){return eo(this,t,e)}initConverters(t,e,i){let s=0;for(let[n,r]of Object.entries(this.dataTables)){let o=e(n),l=i(o,t);r.deleteColumns(),r.setColumns(l),0===s&&(this.converter=o),s++}}}!function(t){t.types={},t.registerType=function(e,i){return!!e&&!t.types[e]&&!!(t.types[e]=i)}}(ed||(ed={}));let eu=ed,{isNumber:ec}=B;!function(t){function e(t,e){if("number"==typeof t)return t;if("boolean"==typeof t)return+!!t;if("string"==typeof t){if(t.indexOf(" ")>-1&&(t=t.replace(/\s+/g,"")),e){if(!e.test(t))return NaN;t=t.replace(e,"$1.$2")}return parseFloat(t)}return t instanceof Date?t.getDate():t?t.getRowCount():NaN}t.asDate=function(t,e){let i;if("string"==typeof t)i=e.parseDate(t);else if("number"==typeof t)i=t;else{if(t instanceof Date)return t;i=e.parseDate(""+t)}return new Date(i)},t.asNumber=e,t.asString=function(t){return""+t},t.asBoolean=function(t){return"boolean"==typeof t?t:"string"==typeof t?""!==t&&"0"!==t&&"false"!==t:!!e(t)},t.guessType=function(e,i){let s="string";if("string"==typeof e){let n=t.trim(`${e}`),r=i.decimalRegExp,o=t.trim(n,!0);r&&(o=r.test(o)?o.replace(r,"$1.$2"):"");let l=parseFloat(o);+o===l?e=l:s=ec(i.parseDate(e))?"Date":"string"}return"number"==typeof e&&(s=e>31536e6?"Date":"number"),s},t.trim=function(t,e){return"string"==typeof t&&(t=t.replace(/^\s+|\s+$/g,""),e&&/^[\d\s]+$/.test(t)&&(t=t.replace(/\s/g,""))),t},t.getColumnsCollection=function(t=[],e){let i={};for(let s=0,n=Math.max(e.length,t.length);s<n;++s)i[e[s]||`${s}`]=t[s]?t[s].slice():[];return i}}(n||(n={}));let em=n,{addEvent:ep,fireEvent:eg,merge:ef}=B;class ey{constructor(t){this.dateFormats={"YYYY/mm/dd":{regex:/^(\d{4})([\-\.\/])(\d{1,2})\2(\d{1,2})$/,parser:function(t){return t?Date.UTC(+t[1],t[3]-1,+t[4]):NaN}},"dd/mm/YYYY":{regex:/^(\d{1,2})([\-\.\/])(\d{1,2})\2(\d{4})$/,parser:function(t){return t?Date.UTC(+t[4],t[3]-1,+t[1]):NaN},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^(\d{1,2})([\-\.\/])(\d{1,2})\2(\d{4})$/,parser:function(t){return t?Date.UTC(+t[4],t[1]-1,+t[3]):NaN}},"dd/mm/YY":{regex:/^(\d{1,2})([\-\.\/])(\d{1,2})\2(\d{2})$/,parser:function(t){let e=new Date;if(!t)return NaN;let i=+t[4];return i>e.getFullYear()-2e3?i+=1900:i+=2e3,Date.UTC(i,t[3]-1,+t[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^(\d{1,2})([\-\.\/])(\d{1,2})\2(\d{2})$/,parser:function(t){return t?Date.UTC(+t[4]+2e3,t[1]-1,+t[3]):NaN}}};let e=ef(ey.defaultOptions,t),i=e.decimalPoint;("."===i||","===i)&&(i="."===i?"\\.":",",this.decimalRegExp=RegExp("^(-?[0-9]+)"+i+"([0-9]+)$")),this.options=e}convertByType(t){let e=this;return({number:t=>em.asNumber(t,e.decimalRegExp),Date:t=>em.asDate(t,e),string:em.asString})[em.guessType(t,e)].call(e,t)}deduceDateFormat(t,e,i){let s=[],n=[],r="YYYY/mm/dd",o,l=[],a=0,h=!1,d,u;for((!e||e>t.length)&&(e=t.length);a<e;a++)if(void 0!==t[a]&&t[a]&&t[a].length)for(u=0,o=t[a].trim().replace(/[\-\.\/]/g," ").split(" "),l=["","",""];u<o.length;u++)u<l.length&&(d=parseInt(o[u],10))&&(n[u]=!n[u]||n[u]<d?d:n[u],void 0!==s[u]?s[u]!==d&&(s[u]=!1):s[u]=d,d>31?d<100?l[u]="YY":l[u]="YYYY":d>12&&d<=31?(l[u]="dd",h=!0):l[u].length||(l[u]="mm"));if(h){for(u=0;u<s.length;u++)!1!==s[u]?n[u]>12&&"YY"!==l[u]&&"YYYY"!==l[u]&&(l[u]="YY"):n[u]>12&&"mm"===l[u]&&(l[u]="dd");3===l.length&&"dd"===l[1]&&"dd"===l[2]&&(l[2]="YY"),r=l.join("/")}return i&&(this.options.dateFormat=r),r}emit(t){eg(this,t.type,t)}on(t,e){return ep(this,t,e)}parseDate(t,e){let i=this.options,s=e||i.dateFormat,n=NaN,r,o=null;if(i.parseDate)n=i.parseDate(t);else{let e=this.dateFormats;if(s){let i=e[s];i||(i=e["YYYY/mm/dd"]),(o=t.match(i.regex))&&(n=i.parser(o))}else for(r in e){let i=e[r];if(o=t.match(i.regex)){s=r,n=i.parser(o);break}}if(!o){let e=Date.parse(t);!isNaN(e)&&(n=e-6e4*new Date(e).getTimezoneOffset(),t.includes("2001")||2001!==new Date(n).getFullYear()||(n=NaN))}}return n}}ey.defaultOptions={dateFormat:"",firstRowAsNames:!0},function(t){t.types={},t.registerType=function(e,i){return!!e&&!t.types[e]&&!!(t.types[e]=i)}}(ey||(ey={}));let ew=ey;class eb{constructor(t={}){this.emittingRegister=[],this.listenerMap={},this.stateMap=t}addListener(t,e,i){let s=this.listenerMap[t]=this.listenerMap[t]||{};return(s[e]=s[e]||[]).push(i),this}buildEmittingTag(t){return("position"===t.cursor.type?[t.table.id,t.cursor.column,t.cursor.row,t.cursor.state,t.cursor.type]:[t.table.id,t.cursor.columns,t.cursor.firstRow,t.cursor.lastRow,t.cursor.state,t.cursor.type]).join("\0")}emitCursor(t,e,i,s){let n=t.id,r=e.state,o=this.listenerMap[n]&&this.listenerMap[n][r];if(o){let r=this.stateMap[n]=this.stateMap[n]??{},l=r[e.state]||[];s&&(l.length||(r[e.state]=l),-1===eb.getIndex(e,l)&&l.push(e));let a={cursor:e,cursors:l,table:t};i&&(a.event=i);let h=this.emittingRegister,d=this.buildEmittingTag(a);if(h.indexOf(d)>=0)return this;try{this.emittingRegister.push(d);for(let t=0,e=o.length;t<e;++t)o[t].call(this,a)}finally{let t=this.emittingRegister.indexOf(d);t>=0&&this.emittingRegister.splice(t,1)}}return this}remitCursor(t,e){let i=this.stateMap[t]&&this.stateMap[t][e.state];if(i){let t=eb.getIndex(e,i);t>=0&&i.splice(t,1)}return this}removeListener(t,e,i){let s=this.listenerMap[t]&&this.listenerMap[t][e];if(s){let t=s.indexOf(i);t>=0&&s.splice(t,1)}return this}}!function(t){function e(t,e){if("range"===t.type)return t;let i={type:"range",firstRow:t.row??(e&&e.firstRow)??0,lastRow:t.row??(e&&e.lastRow)??Number.MAX_VALUE,state:t.state};return void 0!==t.column&&(i.columns=[t.column]),i}t.getIndex=function(t,e){if("position"===t.type){for(let i,s=0,n=e.length;s<n;++s)if("position"===(i=e[s]).type&&i.state===t.state&&i.column===t.column&&i.row===t.row)return s}else{let i=JSON.stringify(t.columns);for(let s,n=0,r=e.length;n<r;++n)if("range"===(s=e[n]).type&&s.state===t.state&&s.firstRow===t.firstRow&&s.lastRow===t.lastRow&&JSON.stringify(s.columns)===i)return n}return -1},t.isEqual=function(t,e){return"position"===t.type&&"position"===e.type?t.column===e.column&&t.row===e.row&&t.state===e.state:"range"===t.type&&"range"===e.type&&t.firstRow===e.firstRow&&t.lastRow===e.lastRow&&JSON.stringify(t.columns)===JSON.stringify(e.columns)},t.isInRange=function(t,i){"position"===i.type&&(i=e(i)),"position"===t.type&&(t=e(t,i));let s=t.columns,n=i.columns;return t.firstRow>=i.firstRow&&t.lastRow<=i.lastRow&&(!s||!n||s.every(t=>n.indexOf(t)>=0))},t.toPositions=function(t){if("position"===t.type)return[t];let e=t.columns||[],i=[],s=t.state;for(let n=t.firstRow,r=t.lastRow;n<r;++n){if(!e.length){i.push({type:"position",row:n,state:s});continue}for(let t=0,r=e.length;t<r;++t)i.push({type:"position",column:e[t],row:n,state:s})}return i},t.toRange=e}(eb||(eb={}));let ev=eb,{doc:eC,isMS:eE,win:eT}=m,ex={isHighContrastModeActive:function(){if(eE&&eT.getComputedStyle){let t=eC.createElement("div");t.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",eC.body.appendChild(t);let e=(t.currentStyle||eT.getComputedStyle(t)).backgroundImage;return eC.body.removeChild(t),"none"===e}return eT.matchMedia&&eT.matchMedia("(forced-colors: active)").matches}};!function(t){t.classNamePrefix="hcg-",t.rawClassNames={container:"container",tableElement:"table",captionElement:"caption",descriptionElement:"description",theadElement:"thead",tbodyElement:"tbody",rowElement:"row",rowEven:"row-even",rowOdd:"row-odd",hoveredRow:"hovered-row",columnElement:"column",hoveredCell:"hovered-cell",hoveredColumn:"hovered-column",syncedRow:"synced-row",syncedCell:"synced-cell",syncedColumn:"synced-column",editedCell:"edited-cell",mockedRow:"mocked-row",rowsContentNowrap:"rows-content-nowrap",virtualization:"virtualization",scrollableContent:"scrollable-content",headerCell:"header-cell",headerCellContainer:"header-cell-container",headerCellContent:"header-cell-content",headerCellFilterIcon:"header-cell-filter-icon",headerCellIcons:"header-cell-icons",headerCellSortIcon:"header-cell-sort-icon",headerCellMenuIcon:"header-cell-menu-icon",headerRow:"head-row-content",noData:"no-data",noPadding:"no-padding",columnFirst:"column-first",columnSortable:"column-sortable",columnSortableIcon:"column-sortable-icon",columnSortedAsc:"column-sorted-asc",columnSortedDesc:"column-sorted-desc",resizableContent:"resizable-content",resizerHandles:"column-resizer",resizedColumn:"column-resized",creditsContainer:"credits-container",creditsText:"credits",creditsPro:"credits-pro",visuallyHidden:"visually-hidden",lastHeaderCellInRow:"last-header-cell-in-row",loadingWrapper:"loading-wrapper",loadingSpinner:"spinner",loadingMessage:"loading-message",popup:"popup",button:"button",icon:"icon",iconSearch:"icon-search",popupContent:"popup-content",columnFilterWrapper:"column-filter-wrapper",toolbarButtonActiveIndicator:"active-indicator",menuContainer:"menu-container",menuItem:"menu-item",menuHeader:"menu-header",menuHeaderCategory:"menu-header-category",menuHeaderName:"menu-header-name",menuItemIcon:"menu-item-icon",menuItemLabel:"menu-item-label",menuDivider:"menu-divider",clearFilterButton:"clear-filter-button",paginationWrapper:"pagination-wrapper",paginationContainer:"pagination-container",paginationPageInfo:"pagination-info",paginationControls:"pagination-controls",paginationButton:"pagination-btn",paginationButtonDisabled:"pagination-btn-disabled",paginationFirstButton:"pagination-first",paginationPrevButton:"pagination-prev",paginationNextButton:"pagination-next",paginationLastButton:"pagination-last",paginationPageButton:"pagination-page",paginationPageButtonActive:"pagination-page-active",paginationEllipsis:"pagination-ellipsis",paginationMobileSelector:"pagination-mobile-selector",paginationMobilePageSizeSelector:"pagination-mobile-page-size-selector",paginationPageSizeContainer:"pagination-page-size-container",paginationPageSizeSelect:"pagination-page-size-select",noWidth:"no-width",rightAlign:"right",centerAlign:"center",leftAlign:"left"},t.win=window,t.composed=[],t.userAgent=t.win.navigator&&t.win.navigator.userAgent||"",t.isChrome=-1!==t.userAgent.indexOf("Chrome"),t.isSafari=!t.isChrome&&-1!==t.userAgent.indexOf("Safari"),t.getClassName=e=>t.classNamePrefix+t.rawClassNames[e]}(r||(r={}));let eS=r,{isObject:eM}=B;J.allowedAttributes.push("srcset","media"),J.allowedTags.push("picture","source"),function(t){function e(t,e,i){let s=document.createElement(t);if(e){let t=Object.keys(e);for(let i=0;i<t.length;i++){let n=t[i],r=e[n];void 0!==r&&("style"===n?Object.assign(s.style,r):s[n]=r)}}return i&&i.appendChild(s),s}function i(t){return -1!==t.indexOf("<")}t.makeHTMLElement=e,t.makeDiv=function(t,i){return e("div",{className:t,id:i})},t.isHTML=i,t.sanitizeText=function(t){try{return new DOMParser().parseFromString(t,"text/html").body.textContent||""}catch{return""}},t.setHTMLContent=function(t,e){i(e)?(t.innerHTML=J.emptyHTML,new J(e).addToDOM(t)):t.innerText=e},t.createOptionsProxy=function(t,e={}){let i=(t={})=>({get(e,s){let n=e[s],r=t[s];return eM(n,!0)?new Proxy(n,i(r??{})):n??r},set:(t,e,i)=>(t[e]=i,!0),deleteProperty:(t,e)=>(delete t[e],!0)});return new Proxy(t,i(e))},t.formatText=function(t,e){return t.replace(/\{(\w+)\}/g,(t,i)=>void 0!==e[i]?String(e[i]):t)}}(o||(o={}));let eN=o,eL={string:["contains","doesNotContain","equals","doesNotEqual","beginsWith","endsWith","empty","notEmpty"],number:["equals","doesNotEqual","greaterThan","greaterThanOrEqualTo","lessThan","lessThanOrEqualTo","empty","notEmpty"],datetime:["equals","doesNotEqual","before","after","empty","notEmpty"],boolean:["all","true","false","empty"]},{defined:eO,fireEvent:eR}=B,{makeHTMLElement:eA}=eN;class eI{static parseCamelCaseToReadable(t){let e=t.replace(/([A-Z])/g," $1").trim().toLowerCase().split(/\s+/).join(" ");return e.charAt(0).toUpperCase()+e.slice(1)}constructor(t){this.onKeyDown=t=>{let e=[];this.filterSelect&&!this.filterSelect.disabled&&e.push(this.filterSelect),this.filterInput&&!this.filterInput.disabled&&e.push(this.filterInput),this.clearButton&&!this.clearButton.disabled&&e.push(this.clearButton);let i={ArrowDown:1,ArrowUp:-1}[t.key];if(i){t.preventDefault();let s=e.indexOf(t.target),n=e.length;e[(s+i+n)%n].focus();return}if("Enter"===t.key&&t.target===this.clearButton){t.preventDefault(),this.set(),e[0]?.focus();return}},this.column=t}async set(t,e){this.filterInput&&(this.filterInput.value=t??""),this.filterSelect&&(this.filterSelect.value=e??eL[this.column.dataType][0]),await this.applyFilter({value:t,condition:e})}renderFilteringContent(t){let e=this.column,i=e.dataType;if(!e.options.filtering?.enabled)return;let s=eA("div",{className:eS.getClassName("columnFilterWrapper")},t);this.renderConditionSelect(s),"boolean"!==i&&this.renderFilteringInput(s,i),this.renderClearButton(s)}applyFilterFromForm(){let t={condition:this.filterSelect?.value};this.filterInput&&(t.value=this.filterInput.value),t.condition&&eL[this.column.dataType].includes(t.condition)&&this.applyFilter(t)}async applyFilter(t){let e=this.column.viewport,i=e.grid.querying,s=i.filtering,n=this.column.id,r=e.grid.accessibility,{value:o}=t;eR(this.column,"beforeFilter",{target:this.column});let l=this.isFilteringApplied(),a=this.clearButton;if(a&&l===a.disabled&&(a.disabled=!l),eO(o)&&""!==o&&"number"!=typeof o)switch(this.column.dataType){case"number":t.value=Number(o);break;case"datetime":t.value=new Date(`${o}Z`).getTime()}this.column.update({filtering:t},!1),s.addColumnFilterCondition(n,t),this.disableInputIfNeeded(),await i.proceed(),await e.updateRows(),r?.userFilteredColumn({...t,columnId:n,rowsCount:e.rows.length},l),eR(this.column,"afterFilter",{target:this.column})}renderFilteringInput(t,e){this.filterInput=eA("input",{},t),this.filterInput.setAttribute("tabindex","-1");let i=this.column;this.filterInput.setAttribute("id","filter-input-"+i.viewport.grid.id+"-"+i.id),this.filterInput.placeholder="Value...","number"===e?this.filterInput.type="number":"datetime"===e?this.filterInput.type="date":(this.filterInput.type="text",this.filterInput.classList.add(eS.getClassName("icon"),eS.getClassName("iconSearch")));let{value:s}=this.column.options.filtering??{};for(let t of((s||0===s)&&(this.filterInput.value="datetime"===e?i.viewport.grid.time.dateFormat("%Y-%m-%d",Number(s)):s.toString()),this.filterSelect&&this.disableInputIfNeeded(),({string:["keyup"],number:["keyup","change"],datetime:["change"]})[e]))this.filterInput.addEventListener(t,()=>{this.applyFilterFromForm()})}renderConditionSelect(t){this.filterSelect=eA("select",{},t),this.filterSelect.setAttribute("tabindex","-1");let e=this.column;this.filterSelect.setAttribute("id","filter-select-"+e.viewport.grid.id+"-"+e.id);let i=eL[e.dataType],s=this.column.viewport.grid.options?.lang?.columnFilteringConditions??{};for(let t of i){let e=document.createElement("option");e.value=t,e.textContent=s[t]??eI.parseCamelCaseToReadable(t),this.filterSelect.appendChild(e)}let n=this.column.options.filtering?.condition;n&&i.includes(n)?this.filterSelect.value=n:this.filterSelect.value=i[0],this.disableInputIfNeeded(),this.filterSelect.addEventListener("change",()=>{this.applyFilterFromForm()})}renderClearButton(t){this.clearButton=eA("button",{className:eS.getClassName("clearFilterButton"),innerText:"Clear filter"},t),this.clearButton.setAttribute("tabindex","-1"),this.clearButton.disabled=!this.isFilteringApplied(),this.clearButton.addEventListener("click",()=>{this.set()})}isFilteringApplied(){let{filterSelect:t,filterInput:e}=this,{dataType:i}=this.column,s=t?.value;return"boolean"===i?"all"!==s:"empty"===s||"notEmpty"===s||e?.value!==""}disableInputIfNeeded(){let{filterSelect:t,filterInput:e}=this,i=t?.value;e&&t&&("empty"===i||"notEmpty"===i?e.disabled=!0:e?.disabled&&(e.disabled=!1))}}let{formatText:eP}=eN,eD=class{constructor(t){this.grid=t,this.element=document.createElement("div"),this.element.classList.add(eS.getClassName("visuallyHidden")),this.grid.container?.prepend(this.element),this.announcerElement=document.createElement("p"),this.announcerElement.setAttribute("aria-atomic","true"),this.announcerElement.setAttribute("aria-hidden","false")}addHeaderCellDescription(t,e){e&&t.setAttribute("aria-description",e)}announce(t,e=!1){this.announcerTimeout&&clearTimeout(this.announcerTimeout),this.announcerElement.remove(),this.announcerElement.setAttribute("aria-live",e?"assertive":"polite"),this.element.appendChild(this.announcerElement),requestAnimationFrame(()=>{this.announcerElement.textContent=t}),this.announcerTimeout=setTimeout(()=>{this.announcerElement.remove()},3e3)}userSortedColumn(t){let e,{options:i}=this.grid,s=i?.lang?.accessibility?.sorting?.announcements;if(i?.accessibility?.announcements?.sorting){switch(t){case"asc":e=s?.ascending;break;case"desc":e=s?.descending;break;default:e=s?.none}e&&this.announce(e,!0)}}setColumnSortState(t,e){t?.setAttribute("aria-sort",e)}userFilteredColumn(t,e){let i,{columnId:s,condition:n,value:r,rowsCount:o}=t,{lang:l,accessibility:a}=this.grid.options||{};if(!a?.announcements?.filtering)return;let h=l?.accessibility?.filtering?.announcements;if(e&&n){let t=eI.parseCamelCaseToReadable(n);i="empty"===n||"notEmpty"===n||"false"===n||"true"===n?eP(h?.emptyFilterApplied||"",{columnId:s,condition:t,rowsCount:o}):eP(h?.filterApplied||"",{columnId:s,condition:t,value:r?.toString()||"",rowsCount:o})}else i=eP(h?.filterCleared||"",{columnId:s,rowsCount:o});this.announce(i,!0)}addHighContrast(){let t=this.grid.options?.accessibility?.highContrastMode;!1!==t&&(ex.isHighContrastModeActive()||!0===t)&&this.grid.contentWrapper?.classList.add("hcg-theme-highcontrast")}setRowIndex(t,e){t.setAttribute("aria-rowindex",e)}setA11yOptions(){let t=this.grid,e=t.tableElement;e&&(e.setAttribute("aria-rowcount",t.dataTable?.getRowCount()||0),t.captionElement&&e.setAttribute("aria-labelledby",t.captionElement.id),t.descriptionElement&&e.setAttribute("aria-describedby",t.descriptionElement.id),this.addHighContrast())}destroy(){this.element.remove(),this.announcerElement.remove(),clearTimeout(this.announcerTimeout)}},{merge:ek}=B;!function(t){t.defaultOptions={accessibility:{enabled:!0,highContrastMode:"auto",announcements:{sorting:!0,filtering:!0}},lang:{accessibility:{sorting:{sortable:"Sortable.",announcements:{ascending:"Sorted ascending.",descending:"Sorted descending.",none:"Not sorted."}},pagination:{announcements:{pageSizeChange:"Page size changed to",pageChange:"Page changed to"}},filtering:{announcements:{filterApplied:"Filter applied for {columnId}, {condition} {value}. {rowsCount} results found.",emptyFilterApplied:"Filter applied for {columnId}, {condition} values. {rowsCount} results found.",filterCleared:"Filter cleared for {columnId}. {rowsCount} results found."}}},loading:"Loading...",noData:"No data to display",filter:"Filter",sortAscending:"Sort ascending",sortDescending:"Sort descending",column:"Column",setFilter:"Set filter",pagination:{pageInfo:"Showing {start} - {end} of {total} (page {currentPage} of {totalPages})",pageSizeLabel:"rows per page",firstPage:"First page",previousPage:"Previous page",nextPage:"Next page",lastPage:"Last page",pageNumber:"Page {page}",ellipsis:"More pages"},columnFilteringConditions:{contains:"Contains",doesNotContain:"Does not contain",equals:"Equals",doesNotEqual:"Does not equal",beginsWith:"Begins with",endsWith:"Ends with",empty:"Empty",notEmpty:"Not empty",greaterThan:"Greater than",greaterThanOrEqualTo:"Greater than or equal to",lessThan:"Less than",lessThanOrEqualTo:"Less than or equal to",before:"Before",after:"After",all:"All",true:"True",false:"False"}},time:{timezone:"UTC"},rendering:{rows:{bufferSize:10,minVisibleRows:2,strictHeights:!1,virtualizationThreshold:50},header:{enabled:!0},columns:{resizing:{enabled:!0,mode:"adjacent"}},theme:"hcg-theme-default"},columnDefaults:{sorting:{sortable:!0},filtering:{inline:!1}}},t.setOptions=function(e){ek(!0,t.defaultOptions,e)}}(l||(l={}));let eH=l,ez=class{constructor(t){this.cell=t}},{setHTMLContent:eB}=eN,{defined:eF}=B;class eW extends ez{constructor(t){super(t),this.add()}add(){this.update()}destroy(){this.cell.htmlElement.innerHTML=J.emptyHTML}update(){eB(this.cell.htmlElement,this.format())}format(){let{cell:t}=this,e=t.row.viewport.grid.options?.columnDefaults?.cells||{},{format:i,formatter:s}=t.column.options.cells||{},n=t.value;eF(n)||(n="");let r="";if(!i&&!s)return t.format(eW.defaultFormatsForDataTypes[t.column.dataType]);let o=e.format===i,l=e.formatter===s;return o&&l?r=s?s.call(t).toString():i?t.format(i):n+"":o?r=s?.call(t).toString()||n+"":l&&(r=i?t.format(i):n+""),r}}(eW||(eW={})).defaultFormatsForDataTypes={string:"{value}",number:"{value}",boolean:"{value}",datetime:"{value:%Y-%m-%d %H:%M:%S}"};let ej=eW,{defined:eU,fireEvent:eq}=B,{createOptionsProxy:eY}=eN,eV=class{constructor(t,e,i){var s;this.cells=[];let{grid:n}=t;if(this.id=e,this.index=i,this.viewport=t,this.loadData(),this.dataType=this.assumeDataType(),n.options&&!n.columnOptionsMap?.[e]){let t={id:e};((s=n.options).columns??(s.columns=[])).push(t),n.columnOptionsMap[e]={index:n.options.columns.length-1,options:t}}this.options=eY(n.columnOptionsMap?.[e]?.options??{},n.options?.columnDefaults),this.options.filtering?.enabled&&(this.filtering=new eI(this)),eq(this,"afterInit")}loadData(){this.data=this.viewport.dataTable.getColumn(this.id,!0)}createCellContent(t){return new ej(t)}assumeDataType(){let{grid:t}=this.viewport,e=t.columnOptionsMap?.[this.id]?.options.dataType??t.options?.columnDefaults?.dataType;if(e)return e;if(!this.data)return"string";if(!Array.isArray(this.data))return"number";for(let t=0,e=Math.min(this.data.length,30);t<e;++t)if(eU(this.data[t]))switch(typeof this.data[t]){case"number":return"number";case"boolean":return"boolean";default:return"string"}return console.warn(`Column "${this.id}" contains too few data points with unambiguous types to correctly determine its dataType. It's recommended to set the \`dataType\` option for it.`),"string"}registerCell(t){t.htmlElement.setAttribute("data-column-id",this.id),this.options.className&&t.htmlElement.classList.add(...this.options.className.split(/\s+/g)),this.viewport.grid.hoveredColumnId===this.id&&t.htmlElement.classList.add(eS.getClassName("hoveredColumn")),this.cells.push(t)}unregisterCell(t){let e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}getWidth(){return this.viewport.columnResizing.getColumnWidth(this)}setHoveredState(t){this.header?.htmlElement?.classList[t?"add":"remove"](eS.getClassName("hoveredColumn"));for(let e=0,i=this.cells.length;e<i;++e)this.cells[e].htmlElement.classList[t?"add":"remove"](eS.getClassName("hoveredColumn"))}setSyncedState(t){this.header?.htmlElement?.classList[t?"add":"remove"](eS.getClassName("syncedColumn"));for(let e=0,i=this.cells.length;e<i;++e)this.cells[e].htmlElement.classList[t?"add":"remove"](eS.getClassName("syncedColumn"))}format(t){return tW.format(t,this,this.viewport.grid)}async update(t,e=!0){await this.viewport.grid.updateColumn(this.id,t,e)}},{makeHTMLElement:e$}=eN,e_=class{constructor(t){this.cells=[],this.viewport=t,this.htmlElement=e$("tr",{}),this.htmlElement.setAttribute("role","row")}render(){let t=this.viewport.columns;for(let e=0,i=t.length;e<i;e++)this.createCell(t[e]).render();this.rendered=!0,this.viewport.virtualRows&&this.reflow()}reflow(){for(let t=0,e=this.cells.length;t<e;++t)this.cells[t].reflow();let t=this.viewport;t.rowsWidth&&(this.htmlElement.style.width=t.rowsWidth+"px")}destroy(){if(this.htmlElement){for(let t=this.cells.length-1;t>=0;--t)this.cells[t].destroy();this.htmlElement.remove()}}getCell(t){return this.cells.find(e=>e.column?.id===t)}registerCell(t){this.cells.push(t)}unregisterCell(t){let e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}},eG=class{constructor(t,e){this.cellEvents=[],this.column=e,this.row=t,this.row.registerCell(this),this.htmlElement=this.init(),this.htmlElement.setAttribute("tabindex","-1"),this.column?.options.cells?.editMode?.enabled||this.htmlElement.setAttribute("aria-readonly","true"),this.initEvents()}init(){let t=document.createElement("td",{});return t.setAttribute("role","gridcell"),t}initEvents(){this.cellEvents.push(["blur",()=>this.onBlur()]),this.cellEvents.push(["focus",()=>this.onFocus()]),this.cellEvents.push(["click",t=>{this.onClick(t)}]),this.cellEvents.push(["keydown",t=>{this.onKeyDown(t)}]),this.cellEvents.forEach(t=>{this.htmlElement.addEventListener(t[0],t[1])})}onFocus(){this.row.viewport.setFocusAnchorCell(this)}onBlur(){delete this.row.viewport.focusCursor}onKeyDown(t){let{row:e,column:i}=this;if(!i)return;let s=e.viewport,{header:n}=s,r={ArrowDown:[1,0],ArrowUp:[-1,0],ArrowLeft:[0,-1],ArrowRight:[0,1]}[t.key];if("Enter"===t.key&&this.onClick(t),r){t.preventDefault(),t.stopPropagation();let{header:o}=s,l=(()=>{if(void 0!==e.index)return e.index-s.rows[0].index;let t=e.level;return n&&void 0!==t?Math.max(t,n.levels)-n.rows.length-1:0})()+r[0];if(l<0&&o){let t=o.rows.length+l;t+1>o.levels?o.rows[t].cells[i.index+r[1]]?.htmlElement.focus():s.columns[i.index+r[1]]?.header?.htmlElement.focus();return}let a=s.rows[l];a&&a.cells[i.index+r[1]]?.htmlElement.focus()}}render(){this.row.htmlElement.appendChild(this.htmlElement),this.reflow()}reflow(){let t=this.column;if(!t)return;let e=this.htmlElement.style;e.width=e.maxWidth=t.getWidth()+"px"}format(t){return tW.format(t,this,this.row.viewport.grid)}setCustomClassName(t){let e=this.htmlElement;if(this.customClassName&&e.classList.remove(...this.customClassName.split(/\s+/g)),!t)return void delete this.customClassName;let i=this.format(t);if(!i)return void delete this.customClassName;e.classList.add(...i.split(/\s+/g)),this.customClassName=i}destroy(){this.cellEvents.forEach(t=>{this.htmlElement.removeEventListener(t[0],t[1])}),this.column?.unregisterCell(this),this.row.unregisterCell(this),this.htmlElement.remove()}},{fireEvent:eK}=B,eZ=class{constructor(t,e){this.toggle=()=>{let t=this.column.viewport.grid.querying.sorting,e=(t.currentSorting?.columnId===this.column.id?t.currentSorting.order:null)||"none";this.setOrder({none:"asc",asc:"desc",desc:null}[e])},this.column=t,this.headerCellElement=e,this.addHeaderElementAttributes(),t.options.sorting?.sortable&&e.classList.add(eS.getClassName("columnSortable"))}addHeaderElementAttributes(){let t=this.column,e=t.viewport.grid.accessibility,i=t.options.sorting,{currentSorting:s}=t.viewport.grid.querying.sorting,n=eS.getClassName("columnSortedAsc"),r=eS.getClassName("columnSortedDesc"),o=this.headerCellElement;if(s?.columnId!==t.id||!s?.order){o.classList.remove(n),o.classList.remove(r),i?.sortable&&e?.setColumnSortState(o,"none");return}switch(s?.order){case"asc":o.classList.add(n),o.classList.remove(r),e?.setColumnSortState(o,"ascending");break;case"desc":o.classList.remove(n),o.classList.add(r),e?.setColumnSortState(o,"descending")}}updateColumnOptions(t){let e=t.viewport.grid.querying.sorting.currentSorting?.order;t.id===this.column.id&&e?t.update({sorting:{order:e}},!1):(delete t.options.sorting?.order,t.options.sorting&&Object.keys(t.options.sorting).length<1&&delete t.options.sorting)}async setOrder(t){let e=this.column.viewport;if(e.validator?.errorCell)return;let i=e.grid.querying.sorting,s=e.grid.accessibility;for(let s of([this.column,e.grid].forEach(e=>{eK(e,"beforeSort",{target:this.column,order:t})}),i.setSorting(t,this.column.id),await e.updateRows(),e.columns))this.updateColumnOptions(s),s.sorting?.addHeaderElementAttributes();s?.userSortedColumn(t),[this.column,e.grid].forEach(e=>{eK(e,"afterSort",{target:this.column,order:t})})}};!function(t){t.icons={filter:{width:16,height:14,children:[{d:"M2.2571 2.77791C1.75287 2.21437 1.50076 1.93259 1.49125 1.69312C1.48299 1.48509 1.57238 1.28515 1.73292 1.15259C1.91773 1 2.29583 1 3.05202 1H12.9473C13.7035 1 14.0816 1 14.2664 1.15259C14.427 1.28515 14.5163 1.48509 14.5081 1.69312C14.4986 1.93259 14.2465 2.21437 13.7422 2.77791L9.93808 7.02962C9.83756 7.14196 9.78731 7.19813 9.75147 7.26205C9.71969 7.31875 9.69637 7.37978 9.68225 7.44323C9.66633 7.51476 9.66633 7.59013 9.66633 7.74087V11.3056C9.66633 11.436 9.66633 11.5011 9.64531 11.5575C9.62673 11.6073 9.59651 11.6519 9.55717 11.6877C9.51265 11.7281 9.45213 11.7524 9.33108 11.8008L7.06441 12.7074C6.81938 12.8054 6.69687 12.8545 6.59852 12.834C6.51251 12.8161 6.43704 12.765 6.3885 12.6918C6.333 12.6081 6.333 12.4762 6.333 12.2122V7.74087C6.333 7.59013 6.333 7.51476 6.31708 7.44323C6.30296 7.37978 6.27964 7.31875 6.24786 7.26205C6.21203 7.19813 6.16177 7.14196 6.06126 7.02962L2.2571 2.77791Z"}]},menu:{width:4,height:12,children:[{d:"M2.00016 6.66675C2.36835 6.66675 2.66683 6.36827 2.66683 6.00008C2.66683 5.63189 2.36835 5.33341 2.00016 5.33341C1.63197 5.33341 1.3335 5.63189 1.3335 6.00008C1.3335 6.36827 1.63197 6.66675 2.00016 6.66675Z"},{d:"M2.00016 2.00008C2.36835 2.00008 2.66683 1.7016 2.66683 1.33341C2.66683 0.965225 2.36835 0.666748 2.00016 0.666748C1.63197 0.666748 1.3335 0.965225 1.3335 1.33341C1.3335 1.7016 1.63197 2.00008 2.00016 2.00008Z"},{d:"M2.00016 11.3334C2.36835 11.3334 2.66683 11.0349 2.66683 10.6667C2.66683 10.2986 2.36835 10.0001 2.00016 10.0001C1.63197 10.0001 1.3335 10.2986 1.3335 10.6667C1.3335 11.0349 1.63197 11.3334 2.00016 11.3334Z"}]},chevronRight:{width:6,height:10,children:[{d:"M1 9L5 5L1 1","stroke-width":1.34}]},checkmark:{width:12,height:9,children:[{d:"M11.3332 1L3.99984 8.33333L0.666504 5"}]},upDownArrows:{width:14,height:12,children:[{d:"M3.66667 0.666748V11.3334M3.66667 11.3334L1 8.66675M3.66667 11.3334L6.33333 8.66675M10.3333 11.3334V0.666748M10.3333 0.666748L7.66667 3.33341M10.3333 0.666748L13 3.33341"}]},sortAsc:{width:14,height:12,children:[{d:"M3.66667 0.666748V11.3334M3.66667 11.3334L1 8.66675M3.66667 11.3334L6.33333 8.66675",opacity:.2},{d:"M 10.3333 11.3334 V 0.6667 M 10.3333 0.6667 L 7.6667 3.3334 M 10.3333 0.6667 L 13 3.3334"}]},sortDesc:{width:14,height:12,children:[{d:"M3.66667 0.666748V11.3334M3.66667 11.3334L1 8.66675M3.66667 11.3334L6.33333 8.66675"},{d:"M 10.3333 11.3334 V 0.6667 M 10.3333 0.6667 L 7.6667 3.3334 M 10.3333 0.6667 L 13 3.3334",opacity:.2}]}},t.pathDefaults={stroke:"currentColor","stroke-width":1.33,"stroke-linecap":"round","stroke-linejoin":"round"},t.createGridIcon=function(e,i=eS.getClassName("icon")){let s=t=>document.createElementNS("http://www.w3.org/2000/svg",t),{width:n=16,height:r=16,viewBox:o,fill:l,children:a}=t.icons[e],h=s("svg");for(let e of(h.setAttribute("width",n.toString()),h.setAttribute("height",r.toString()),h.setAttribute("viewBox",o??`0 0 ${n} ${r}`),h.setAttribute("fill",l??"none"),a??[])){let i=s("path");for(let s of new Set([...Object.keys(e),...Object.keys(t.pathDefaults)])){let n=e[s]??t.pathDefaults[s];void 0!==n&&i.setAttribute(s,n.toString())}h.appendChild(i)}return h.classList.add(i),h}}(a||(a={}));let eX=a,{makeHTMLElement:eJ}=eN,eQ=class{constructor(t){this.eventListenerDestroyers=[],this.isActive=!1,this.options=t}add(t){let e=this.options;this.toolbar=t,t.buttons.push(this);let i=eJ("span",e.classNameKey&&{className:eS.getClassName(e.classNameKey)},t.container);this.wrapper=i;let s=this.buttonEl=eJ("button",{className:eS.getClassName("button")+(this.isActive?" active":"")},i);return s.setAttribute("type","button"),s.setAttribute("tabindex","-1"),this.setA11yAttributes(s),this.setIcon(e.icon),this.refreshState(),this.addEventListeners(),this}setA11yAttributes(t){let{accessibility:e,tooltip:i}=this.options,{ariaLabel:s,ariaExpanded:n,ariaControls:r}=e||{};i&&(t.title=i),s&&t.setAttribute("aria-label",s),"boolean"==typeof n&&t.setAttribute("aria-expanded",n),r&&t.setAttribute("aria-controls",r)}focus(){this.buttonEl?.focus();let t=this.toolbar;t&&(t.focusCursor=t.buttons.indexOf(this))}setIcon(t){this.icon?.remove(),this.icon=eX.createGridIcon(t),this.buttonEl?.appendChild(this.icon)}setActive(t){this.isActive=t,this.buttonEl?.classList.toggle("active",t),this.renderActiveIndicator(t)}setHighlighted(t){this.buttonEl?.classList.toggle("highlighted",t),"boolean"==typeof this.options.accessibility?.ariaExpanded&&this.buttonEl?.setAttribute("aria-expanded",t)}destroy(){this.removeEventListeners(),this.wrapper?.remove(),this.toolbar?.buttons.splice(this.toolbar.buttons.indexOf(this),1),delete this.toolbar}refreshState(){}clickHandler(t){this.options.onClick?.(t,this)}renderActiveIndicator(t){let e=this.buttonEl;if(e){if(this.activeIndicator?.remove(),!t)return void delete this.activeIndicator;this.activeIndicator=eJ("div",{className:eS.getClassName("toolbarButtonActiveIndicator")},e)}}addEventListeners(){let t=t=>{this.clickHandler(t)};this.buttonEl?.addEventListener("click",t),this.eventListenerDestroyers.push(()=>{this.buttonEl?.removeEventListener("click",t)})}removeEventListeners(){for(let t of this.eventListenerDestroyers)t();this.eventListenerDestroyers.length=0}};!function(t){t.isFiltered=function(t){let{condition:e,value:i}=t.options.filtering||{};return!!(e&&(["empty","notEmpty","true","false"].includes(e)||void 0!==i&&""!==i))},t.isSorted=function(t,e){let{currentSorting:i}=t.viewport.grid.querying.sorting||{};return i?.columnId===t.id&&(e?i?.order===e:!!i?.order)}}(h||(h={}));let e0=h,{addEvent:e1}=B,e3=class extends eQ{constructor(){super({icon:"upDownArrows",classNameKey:"headerCellSortIcon",accessibility:{ariaLabel:"sort"}})}clickHandler(t){super.clickHandler(t),this.toolbar?.column.sorting?.toggle()}refreshState(){let t=this.toolbar?.column;if(!t)return;if(!e0.isSorted(t)){this.setActive(!1),this.setIcon("upDownArrows");return}let{currentSorting:e}=t.viewport.grid.querying.sorting;this.setActive(!0),this.setIcon(e?.order==="asc"?"sortAsc":"sortDesc")}addEventListeners(){super.addEventListeners();let t=this.toolbar?.column;t&&this.eventListenerDestroyers.push(e1(t.viewport.grid,"afterSort",()=>this.refreshState()))}renderActiveIndicator(){}},{makeHTMLElement:e6}=eN,{fireEvent:e2}=B,e5=class{constructor(t,e,i){this.isVisible=!1,this.eventListenerDestroyers=[],this.grid=t,this.button=e,this.options=i||{}}show(t){if(this.container)return;this.button?.setHighlighted(!0),this.container=e6("div",{className:eS.getClassName("popup")}),this.content=e6("div",{className:eS.getClassName("popupContent")});let{header:e}=this.options;e&&this.addHeader(e.label,e.category),this.renderContent(this.content),this.container.appendChild(this.content),this.anchorElement=t,this.isVisible=!0,this.grid.contentWrapper?.appendChild(this.container),this.position(t),this.addEventListeners(),this.grid.popups.add(this),e2(this,"afterShow")}hide(){this.container&&(this.grid.popups.delete(this),this.isVisible=!1,this.removeEventListeners(),this.container.remove(),delete this.container,delete this.content,this.button?.setHighlighted(!1),e2(this,"afterHide"))}toggle(t){this.isVisible?this.hide():this.show(t)}reflow(){this.anchorElement?.isConnected?this.position(this.anchorElement):this.hide()}position(t){let e=this.grid.contentWrapper;if(!this.container||!this.content||!e)return;let i=this.options.nextToAnchor||!1,s=this.container.getBoundingClientRect(),n=e.getBoundingClientRect(),r=t?.getBoundingClientRect()??n,o=i?r.top:r.bottom+4,l=i?r.right+3:r.left;l+s.width>n.width&&(l=-s.width+(i?r.left+4:r.right)),l<n.left&&(l=n.left),this.container.style.top=`${o-n.top}px`,this.container.style.left=`${l-n.left}px`;let a=this.content.getBoundingClientRect();a.height+a.top-n.top>n.height?(this.container.style.top="auto",this.container.style.bottom="0"):(this.container.style.top=`${o-n.top}px`,this.container.style.bottom="auto")}addHeader(t,e){if(!this.content)return;let i=e6("div",{className:eS.getClassName("menuHeader")},this.content);return e&&e6("span",{className:eS.getClassName("menuHeaderCategory"),innerText:e+" "},i),e6("span",{className:eS.getClassName("menuHeaderName"),innerText:t},i),i}onKeyDown(t){("Escape"===t.key||"Tab"===t.key&&t.shiftKey)&&(t.preventDefault(),this.hide(),this.button?.focus())}onClickOutside(t){this.container?.contains(t.target)||this.anchorElement?.contains(t.target)||this.hide()}addEventListeners(){let t=this.container;if(!t)return;let e=t=>{this.onClickOutside(t)},i=t=>{this.onKeyDown(t)};document.addEventListener("mousedown",e),t.addEventListener("keydown",i),this.eventListenerDestroyers.push(()=>{document.removeEventListener("mousedown",e),t.removeEventListener("keydown",i)})}removeEventListeners(){for(let t of this.eventListenerDestroyers)t();this.eventListenerDestroyers.length=0}},{merge:e7}=B,e4=class extends e5{constructor(t,e,i){let s=t.column.viewport.grid;super(s,e,e7({header:{category:s.options?.lang?.setFilter,label:t.column.header?.value||""}},i)),this.filtering=t}show(t){super.show(t),this.filtering.filterSelect?.focus()}renderContent(t){this.filtering.renderFilteringContent(t)}onKeyDown(t){super.onKeyDown(t),this.filtering.onKeyDown(t)}},{addEvent:e9}=B,e8=class extends eQ{constructor(){super({icon:"filter",classNameKey:"headerCellFilterIcon",accessibility:{ariaLabel:"filter",ariaExpanded:!1,ariaControls:"filter-popup"}})}refreshState(){let t=this.toolbar?.column;t&&this.setActive(e0.isFiltered(t))}addEventListeners(){super.addEventListeners();let t=this.toolbar;t&&this.eventListenerDestroyers.push(e9(t.column,"afterFilter",()=>{this.refreshState()}))}clickHandler(t){super.clickHandler(t);let e=this.toolbar?.column.filtering;e&&(this.popup||(this.popup=new e4(e,this)),this.popup.toggle(this.wrapper))}},{makeHTMLElement:it}=eN,ie=class extends e5{constructor(){super(...arguments),this.buttons=[],this.focusCursor=0}ensureItemsContainer(){if(this.content)return this.itemsContainer||(this.itemsContainer=it("ul",{className:eS.getClassName("menuContainer")},this.content)),this.itemsContainer}show(t){super.show(t),this.buttons[0]?.focus()}hide(){for(let t of this.buttons)t.destroy();this.buttons.length=0,this.itemsContainer?.remove(),delete this.itemsContainer,super.hide()}addDivider(){if(this.ensureItemsContainer())return it("li",{className:eS.getClassName("menuDivider")},this.itemsContainer)}onClickOutside(t){let e=this.buttons;for(let i=0,s=e.length;i<s;++i)if(e[i].popup?.container?.contains(t.target))return;super.onClickOutside(t)}onKeyDown(t){super.onKeyDown(t);let e=this.buttons.length,i=this.focusCursor;switch(t.key){case"ArrowUp":case"ArrowLeft":t.preventDefault(),this.buttons[Math.abs((i-1+e)%e)].focus();break;case"ArrowDown":case"ArrowRight":t.preventDefault(),this.buttons[(i+1)%e].focus()}}},{makeHTMLElement:ii}=eN,is=class{constructor(t){this.eventListenerDestroyers=[],this.isActive=!1,this.options=t}add(t){let e=this.options;this.contextMenu=t,t.buttons.push(this);let i=t.ensureItemsContainer();if(!i)return;let s=this.wrapper=ii("li",e.classNameKey&&{className:eS.getClassName(e.classNameKey)},i),n=this.buttonEl=ii("button",{className:eS.getClassName("menuItem")},s),r=this.iconWrapper=ii("span",{className:eS.getClassName("menuItemIcon")},n);this.spanEl=ii("span",{className:eS.getClassName("menuItemLabel"),innerText:e.label||""},n);let o=ii("span",{className:eS.getClassName("menuItemIcon")},n);return r.setAttribute("aria-hidden","true"),o.setAttribute("aria-hidden","true"),n.setAttribute("type","button"),n.setAttribute("tabindex","-1"),this.refreshState(),e.chevron&&o.appendChild(eX.createGridIcon("chevronRight")),e.icon&&this.setIcon(e.icon),this.addEventListeners(),this}focus(){this.buttonEl?.focus();let t=this.contextMenu;t&&(t.focusCursor=t.buttons.indexOf(this))}setLabel(t){this.spanEl&&(this.spanEl.innerText=t)}setIcon(t){this.icon?.remove(),t&&(this.icon=eX.createGridIcon(t),this.iconWrapper?.appendChild(this.icon))}setActive(t){this.isActive=t,this.buttonEl?.classList.toggle("active",t);let{activeIcon:e,icon:i}=this.options;e&&this.setIcon(t?e:i)}setHighlighted(t){this.buttonEl?.classList.toggle("highlighted",t)}destroy(){this.removeEventListeners(),this.wrapper?.remove();let t=this.contextMenu;t&&(t.buttons.splice(t.buttons.indexOf(this),1),delete this.contextMenu)}refreshState(){}clickHandler(t){this.options.onClick?.(t,this)}addEventListeners(){let t=t=>{this.clickHandler(t)};this.buttonEl?.addEventListener("click",t),this.eventListenerDestroyers.push(()=>{this.buttonEl?.removeEventListener("click",t)})}removeEventListeners(){for(let t of this.eventListenerDestroyers)t();this.eventListenerDestroyers.length=0}},{addEvent:ir}=B,io=class extends is{constructor(t){super({label:t.filter,icon:"filter",chevron:!0})}refreshState(){let t=this.contextMenu?.button.toolbar?.column;t&&this.setActive(e0.isFiltered(t))}addEventListeners(){super.addEventListeners();let t=this.contextMenu?.button.toolbar;t&&this.eventListenerDestroyers.push(ir(t.column,"afterFilter",()=>{this.refreshState()}))}clickHandler(t){super.clickHandler(t);let e=this.contextMenu?.button.toolbar?.column.filtering;e&&(this.popup||(this.popup=new e4(e,this,{nextToAnchor:!0})),this.popup.toggle(this.wrapper))}},{addEvent:il}=B,ia=class extends is{constructor(t,e){super({icon:"asc"===e?"sortAsc":"sortDesc"}),this.direction=e,this.options.label=t["asc"===e?"sortAscending":"sortDescending"]}refreshState(){let t=this.contextMenu?.button?.toolbar?.column;t&&this.setActive(e0.isSorted(t,this.direction))}addEventListeners(){super.addEventListeners();let t=this.contextMenu?.button?.toolbar?.column;t&&this.eventListenerDestroyers.push(il(t.viewport.grid,"afterSort",()=>this.refreshState()))}clickHandler(t){super.clickHandler(t);let e=this.contextMenu?.button?.toolbar?.column.sorting;e&&e.setOrder(this.isActive?null:this.direction)}},ih=class extends ie{constructor(t,e){super(t,e),this.button=e}renderContent(){let t=this.grid.options?.lang||{},e=this.button.toolbar?.column.options||{},i=e.filtering?.enabled&&!e.filtering.inline,s=e.sorting?.sortable;this.addHeader(this.button.toolbar?.column.header?.value||"",t.column),s&&(new ia(t,"desc").add(this),new ia(t,"asc").add(this),i&&this.addDivider()),i&&new io(t||{}).add(this)}},{addEvent:id}=B,iu=class extends eQ{constructor(){super({icon:"menu",classNameKey:"headerCellMenuIcon"})}clickHandler(t){super.clickHandler(t);let e=this.toolbar?.column.viewport.grid;e&&(this.popup||(this.popup=new ih(e,this)),this.popup.toggle(this.wrapper))}refreshState(){let t=this.toolbar?.column;t&&this.setActive(e0.isSorted(t)||e0.isFiltered(t))}addEventListeners(){super.addEventListeners();let t=this.toolbar?.column;t&&this.eventListenerDestroyers.push(id(t.viewport.grid,"afterSort",()=>{this.refreshState()}),id(t,"afterFilter",()=>{this.refreshState()}))}},{makeHTMLElement:ic}=eN,{getStyle:im}=B;class ip{constructor(t){this.buttons=[],this.focusCursor=0,this.eventListenerDestroyers=[],this.column=t}renderFull(){let t=this.column.options;t.sorting?.sortable&&new e3().add(this),t.filtering?.enabled&&!t.filtering.inline&&new e8().add(this)}renderMinimized(){let t=this.column.options;(t.sorting?.sortable||t.filtering?.enabled&&!t.filtering.inline)&&new iu().add(this)}add(){let t=this.column.header;if(!t?.container)return;this.columnResizeObserver&&(this.columnResizeObserver.disconnect(),delete this.columnResizeObserver),this.columnResizeObserver=new ResizeObserver(()=>this.reflow()),this.columnResizeObserver.observe(t.container);let e=this.container=ic("div",{className:eS.getClassName("headerCellIcons")});t.container.appendChild(e);let i=t=>{this.keyDownHandler(t)};e.addEventListener("keydown",i),this.eventListenerDestroyers.push(()=>{e.removeEventListener("keydown",i)})}clearButtons(){let{buttons:t}=this;for(;t.length>0;)t[t.length-1].destroy()}reflow(){let t=this.column.getWidth()<=ip.MINIMIZED_COLUMN_WIDTH;if(t!==this.isMinimized&&(this.isMinimized=t,this.clearButtons(),t?this.renderMinimized():this.renderFull()),!t)return;let e=this.column.header?.htmlElement,i=this.container,s=e?.offsetWidth||0,n=this.buttons[0]?.wrapper?.offsetWidth||0,r=s-((e&&im(e,"padding-left",!0)||0)+(e&&im(e,"padding-right",!0)||0))<n+((i&&im(i,"margin-left",!0)||0)+(i&&im(i,"margin-right",!0)||0));this.isMenuCentered!==r&&(this.isMenuCentered=r,this.column.header?.container?.classList.toggle(eS.getClassName("noWidth"),r))}destroy(){for(let t of this.eventListenerDestroyers)t();this.eventListenerDestroyers.length=0,this.columnResizeObserver?.disconnect(),delete this.columnResizeObserver}focus(){this.buttons[0]?.focus()}keyDownHandler(t){let e=this.buttons.length,i=this.focusCursor;switch(t.key){case"ArrowUp":case"ArrowLeft":this.buttons[Math.abs((i-1+e)%e)].focus();break;case"ArrowDown":case"ArrowRight":this.buttons[(i+1)%e].focus();break;case"Escape":this.column.header?.htmlElement.focus()}}}ip.MINIMIZED_COLUMN_WIDTH=120;let{makeHTMLElement:ig,setHTMLContent:iy,createOptionsProxy:iw}=eN,{fireEvent:ib,isString:iv}=B,iC=class extends eG{constructor(t,e,i){super(t,e),this.superColumnOptions={},this.columns=[],this.value="";let s=this.row.viewport.header;if(!s)throw Error("No header found.");if(this.tableHeader=s,e)e.header=this,this.columns.push(e);else if(i){let t=this.row.viewport;for(let e of t.grid.getColumnIds(i,!0)){let i=t.getColumn(e);i&&this.columns.push(i)}}}init(){let t=document.createElement("th",{});return t.classList.add(eS.getClassName("headerCell")),t.setAttribute("role","columnheader"),t}render(){let{column:t}=this,e=iw(this.superColumnOptions,t?.options),i=e.header||{};i.formatter?this.value=i.formatter.call(this).toString():iv(i.format)?this.value=t?t.format(i.format):i.format:this.value=t?.id||"",this.row.htmlElement.appendChild(this.htmlElement);let s=this.container=ig("div",{className:eS.getClassName("headerCellContainer")},this.htmlElement);this.headerContent=ig("span",{className:eS.getClassName("headerCellContent")},s),iy(this.headerContent,this.value),this.htmlElement.setAttribute("scope","col"),this.superColumnOptions.className&&this.htmlElement.classList.add(...this.superColumnOptions.className.split(/\s+/g)),t&&(this.htmlElement.setAttribute("data-column-id",t.id),this.htmlElement.setAttribute("aria-label",t.id),t.options.className&&this.htmlElement.classList.add(...t.options.className.split(/\s+/g)),t.viewport.columnsResizer?.renderColumnDragHandles(t,this),this.toolbar=new ip(t),this.toolbar.add(),this.initColumnSorting()),this.setCustomClassName(e.header?.className),t?.dataType==="number"&&this.setCustomClassName(eS.getClassName("rightAlign")),ib(this,"afterRender",{column:t})}reflow(){let t=this.htmlElement;if(!t)return;let e=0;for(let t of this.columns)e+=t.getWidth()||0;t.style.width=t.style.maxWidth=e+"px",this.toolbar?.reflow()}onKeyDown(t){if(this.column&&t.target===this.htmlElement){if("Enter"===t.key){this.toolbar?.focus(),t.preventDefault();return}super.onKeyDown(t)}}onClick(t){let e=this.column;!e||t.target!==this.htmlElement&&t.target!==e.header?.headerContent||e.viewport.columnsResizer?.isResizing||(e.options.sorting?.sortable&&e.sorting?.toggle(),ib(this,"click",{originalEvent:t,column:this.column}))}initColumnSorting(){let{column:t}=this;t&&(t.sorting=new eZ(t,this.htmlElement))}isLastColumn(){let t=this.row.viewport;return t.columns[t.columns.length-1]===this.columns?.[this.columns.length-1]}destroy(){this.toolbar?.destroy(),super.destroy()}},{isString:iE}=B,iT=class extends e_{constructor(t,e){super(t),this.level=e,this.setRowAttributes()}createCell(t,e){return new iC(this,t,e)}renderContent(t){let e=this.viewport.grid.options?.header,i=this.viewport,s=i.grid.enabledColumns||[];if(i.theadElement?.appendChild(this.htmlElement),this.htmlElement.classList.add(eS.getClassName("headerRow")),e){let n=this.getColumnsAtLevel(e,t);for(let e=0,r=n.length;e<r;e++){let r=n[e],o="string"==typeof r,l=!o&&r.columns?i.grid.getColumnIds(r.columns).length:0,a=o?r:r.columnId,h=a?i.getColumn(a||""):void 0,d=o?void 0:r.format,u=o?void 0:r.className;if(a&&s&&0>s.indexOf(a)||!h&&0===l)continue;let c=this.createCell(h,o?void 0:r.columns);o||i.grid.accessibility?.addHeaderCellDescription(c.htmlElement,r.accessibility?.description),iE(d)&&(c.superColumnOptions.header||(c.superColumnOptions.header={}),c.superColumnOptions.header.format=d),u&&(c.superColumnOptions.className=u),h?.index===0&&0===e&&c.htmlElement.classList.add(eS.getClassName("columnFirst")),c.render(),a?c.htmlElement.setAttribute("rowSpan",(this.viewport.header?.levels||1)-t):l>1&&c.htmlElement.setAttribute("colSpan",l)}}else super.render();this.setLastCellClass()}reflow(){for(let t=0,e=this.cells.length;t<e;t++)this.cells[t].reflow()}setLastCellClass(){let t=this.cells[this.cells.length-1];t.isLastColumn()&&t.htmlElement.classList.add(eS.getClassName("lastHeaderCellInRow"))}getColumnsAtLevel(t,e,i=0){let s=[];for(let n of t)i===e&&s.push(n),"string"!=typeof n&&n.columns&&(s=s.concat(this.getColumnsAtLevel(n.columns,e,i+1)));return s}setRowAttributes(){this.viewport.grid.accessibility?.setRowIndex(this.htmlElement,this.level)}},{fireEvent:ix}=B,iS=class extends iC{constructor(t,e){let i=e.header;super(t,e),e.header=i}render(){let{column:t}=this;t&&(this.row.htmlElement.appendChild(this.htmlElement),this.htmlElement.setAttribute("scope","col"),this.htmlElement.setAttribute("data-column-id",t.id),t.options.className&&this.htmlElement.classList.add(...t.options.className.split(/\s+/g)),this.setCustomClassName(t.options.header?.className),ix(this,"afterRender",{column:t,filtering:!0}))}onKeyDown(t){this.column.filtering?.onKeyDown(t),t.target===this.htmlElement?"Enter"===t.key?this.column.filtering?.filterSelect?.focus():super.onKeyDown(t):"Escape"===t.key&&this.htmlElement.focus()}onClick(t){t.target===this.htmlElement&&this.htmlElement.focus()}},iM=class extends iT{constructor(t){super(t,(t.header?.levels??0)+1)}createCell(t){return new iS(this,t)}renderContent(){let t=this.viewport,e=t.grid.enabledColumns||[];t.theadElement?.appendChild(this.htmlElement),this.htmlElement.classList.add(eS.getClassName("headerRow"));for(let i=0,s=t.columns.length;i<s;i++){let s=t.columns[i];if(e?.indexOf(s.id)<0)continue;let n=this.createCell(s);n.render(),s.options.filtering?.inline&&s.filtering?.renderFilteringContent(n.htmlElement)}let i=this.cells[0];i.column?.index===0&&this.cells[0].htmlElement.classList.add(eS.getClassName("columnFirst")),this.setLastCellClass()}},iN=class{constructor(t){this.columns=[],this.rows=[],this.levels=1,this.viewport=t,this.columns=t.columns,t.grid.options?.header&&(this.levels=this.getRowLevels(t.grid.options?.header))}render(){let t=this.viewport;if(t.grid.enabledColumns){for(let e=0,i=this.levels;e<i;e++){let i=new iT(t,e+1);i.renderContent(e),this.rows.push(i)}if(t.columns.some(t=>t.options.filtering?.enabled&&t.options.filtering.inline||!1)){let e=new iM(t);e.renderContent(),this.rows.push(e)}}}reflow(){let t=this.viewport;if(!t.theadElement)return;let{clientWidth:e,offsetWidth:i}=t.tbodyElement;for(let t of this.rows)t.reflow();t.rowsWidth&&(t.theadElement.style.width=Math.max(t.rowsWidth,e)+(i-e)+"px")}getRowLevels(t){let e=0;for(let i of t)if("string"!=typeof i&&i.columns){let t=this.getRowLevels(i.columns);t>e&&(e=t)}return e+1}scrollHorizontally(t){let e=this.viewport.theadElement;e&&(e.style.transform=`translateX(${-t}px)`)}destroy(){for(let t of this.rows)t.destroy()}},{fireEvent:iL}=B,iO=class extends eG{constructor(t,e){super(t,e),this.column=e,this.row=t,this.column.registerCell(this)}render(){super.render(),this.setValue()}async setValue(t=this.column.data?.[this.row.index],e=!1){this.value=t,e&&await this.updateDataTable()||(this.content?this.content.update():this.content=this.column.createCellContent(this),this.htmlElement.setAttribute("data-value",this.value+""),this.setCustomClassName(this.column.options.cells?.className),"number"===this.column.dataType&&this.setCustomClassName(eS.getClassName("rightAlign")),iL(this,"afterRender",{target:this}))}async updateDataTable(){if(this.column.data?.[this.row.index]===this.value)return!1;let t=this.column.viewport,{dataTable:e}=t.grid,i=this.row.id&&e?.getLocalRowIndex(this.row.id);return!!e&&void 0!==i&&(this.row.data[this.column.id]=this.value,e.setCell(this.column.id,i,this.value),t.grid.dataTable!==t.grid.presentationTable&&(await t.updateRows(),!0))}initEvents(){this.cellEvents.push(["dblclick",t=>this.onDblClick(t)]),this.cellEvents.push(["mouseout",()=>this.onMouseOut()]),this.cellEvents.push(["mouseover",()=>this.onMouseOver()]),this.cellEvents.push(["mousedown",t=>{this.onMouseDown(t)}]),super.initEvents()}onFocus(){super.onFocus(),this.row.viewport.focusCursor=[this.row.index,this.column.index]}onMouseDown(t){t.target===this.htmlElement&&this.htmlElement.focus(),iL(this,"mouseDown",{target:this,originalEvent:t})}onMouseOver(){let{grid:t}=this.row.viewport;t.hoverRow(this.row.index),t.hoverColumn(this.column.id),iL(this,"mouseOver",{target:this})}onMouseOut(){let{grid:t}=this.row.viewport;t.hoverRow(),t.hoverColumn(),iL(this,"mouseOut",{target:this})}onDblClick(t){iL(this,"dblClick",{target:this,originalEvent:t})}onClick(){iL(this,"click",{target:this})}onKeyDown(t){t.target===this.htmlElement&&(iL(this,"keyDown",{target:this,originalEvent:t}),super.onKeyDown(t))}destroy(){this.content?.destroy(),delete this.content,super.destroy()}},iR=class extends e_{constructor(t,e){super(t),this.data={},this.translateY=0,this.index=e,this.id=t.dataTable.getOriginalRowIndex(e),this.loadData(),this.setRowAttributes()}createCell(t){return new iO(this,t)}loadData(){let t=this.viewport.dataTable.getRowObject(this.index);t&&(this.data=t)}update(){this.id=this.viewport.dataTable.getOriginalRowIndex(this.index),this.updateRowAttributes(),this.loadData();for(let t=0,e=this.cells.length;t<e;++t)this.cells[t].setValue();this.reflow()}setHoveredState(t){this.htmlElement.classList[t?"add":"remove"](eS.getClassName("hoveredRow")),t&&(this.viewport.grid.hoveredRowIndex=this.index)}setSyncedState(t){this.htmlElement.classList[t?"add":"remove"](eS.getClassName("syncedRow")),t&&(this.viewport.grid.syncedRowIndex=this.index)}setRowAttributes(){let t=this.index,e=this.htmlElement;e.classList.add(eS.getClassName("rowElement")),e.setAttribute("data-row-index",t),this.updateRowAttributes(),e.classList.add(eS.getClassName(t%2?"rowEven":"rowOdd")),this.viewport.grid.hoveredRowIndex===t&&e.classList.add(eS.getClassName("hoveredRow")),this.viewport.grid.syncedRowIndex===t&&e.classList.add(eS.getClassName("syncedRow"))}updateRowAttributes(){let t=this.viewport,e=t.grid.accessibility,i=this.index,s=this.htmlElement;void 0!==this.id&&s.setAttribute("data-row-id",this.id),e?.setRowIndex(s,i+(t.header?.rows.length??0)+1)}setTranslateY(t){this.translateY=t,this.htmlElement.style.transform=`translateY(${t}px)`}getDefaultTopOffset(){return this.index*this.viewport.rowsVirtualizer.defaultRowHeight}},iA=class{constructor(t){this.rowCursor=0,this.preventScroll=!1,this.rowSettings=t.grid.options?.rendering?.rows,this.viewport=t,this.strictRowHeights=this.rowSettings.strictHeights,this.buffer=Math.max(this.rowSettings.bufferSize,0),this.defaultRowHeight=this.getDefaultRowHeight(),this.strictRowHeights&&t.tbodyElement.classList.add(eS.getClassName("rowsContentNowrap"))}initialRender(){this.viewport.virtualRows&&this.viewport.reflow(),this.renderRows(this.rowCursor),this.adjustRowHeights()}rerender(){let t,e=this.viewport.tbodyElement,i=this.viewport.rows,s=e.scrollLeft;if(i.length){t=e.scrollTop;for(let t=0,e=i.length;t<e;++t)i[t].destroy();i.length=0}this.renderRows(this.rowCursor),this.viewport.virtualRows&&(void 0!==t&&(e.scrollTop=t),this.scroll()),i=this.viewport.rows;for(let t=0,e=i.length;t<e;++t)i[t].reflow();e.scrollLeft=s}scroll(){let t=this.viewport.tbodyElement,{defaultRowHeight:e}=this,i=t.scrollTop;if(this.preventScroll){i<=t.scrollTop&&(this.preventScroll=!1),this.adjustBottomRowHeights();return}let s=Math.floor(t.scrollTop/e);this.rowCursor!==s&&this.renderRows(s),this.rowCursor=s,this.adjustRowHeights(),this.strictRowHeights||!(i>t.scrollTop)||this.preventScroll||(t.scrollTop=i,this.preventScroll=!0)}adjustBottomRowHeights(){let t=this.viewport.rows,e=t.length,i=t[e-1],s=i.translateY,n=s+i.htmlElement.offsetHeight,r=i.cells[0].htmlElement.offsetHeight;s=n-r,i.htmlElement.style.height=r+"px",i.setTranslateY(s);for(let t=0,e=i.cells.length;t<e;++t)i.cells[t].htmlElement.style.transform="";for(let i=e-2;i>=0;i--){let e=t[i];s-=r=e.cells[0].htmlElement.offsetHeight,e.htmlElement.style.height=r+"px",e.setTranslateY(s);for(let t=0,i=e.cells.length;t<i;++t)e.cells[t].htmlElement.style.transform=""}}renderRows(t){let{viewport:e,buffer:i}=this,s=e.dataTable.getRowCount();if(s<1)return;let n=this.viewport.virtualRows,r=n?Math.ceil((e.grid.tableElement?.clientHeight||0)/this.defaultRowHeight):1/0,o=e.rows;if(!n&&o.length>50&&console.warn("Grid: a large dataset can cause performance issues when virtualization is disabled. Consider enabling virtualization in the rows settings."),!o.length){let t=new iR(e,s-1);e.tbodyElement.appendChild(t.htmlElement),t.render(),o.push(t),n&&t.setTranslateY(t.getDefaultTopOffset())}let l=Math.max(0,Math.min(t-i,s-r)),a=Math.min(t+r+i,o[o.length-1].index-1),h=o.pop(),d=[];for(let t=0,e=o.length;t<e;++t){let e=o[t],i=e.index;i<l||i>a?e.destroy():d.push(e)}e.rows=o=d;for(let t=l;t<=a;++t)if(!o[t-(o[0]?.index||0)]){let i=new iR(e,t);o.push(i),i.rendered=!1,n&&i.setTranslateY(i.getDefaultTopOffset())}o.sort((t,e)=>t.index-e.index);for(let t=0,i=o.length;t<i;++t)o[t].rendered||(e.tbodyElement.insertBefore(o[t].htmlElement,e.tbodyElement.lastChild),o[t].render());if(h&&o.push(h),e.focusCursor){let[t,i]=e.focusCursor,s=o.find(e=>e.index===t);s&&s.cells[i]?.htmlElement.focus({preventScroll:!0})}if((!e.focusCursor||!e.focusAnchorCell?.row.rendered)&&o.length>0){let i=t-o[0].index;o[i]&&e.setFocusAnchorCell(o[i].cells[0])}}adjustRowHeights(){if(this.strictRowHeights||!this.viewport.virtualRows)return;let{rowCursor:t,defaultRowHeight:e}=this,{rows:i,tbodyElement:s}=this.viewport,n=i.length;if(n<1)return;let r=i[0].getDefaultTopOffset();for(let r=0;r<n;++r){let n=i[r];if(n.htmlElement.style.height="",n.cells[0].htmlElement.style.transform)for(let t=0,e=n.cells.length;t<e;++t)n.cells[t].htmlElement.style.transform="";if(n.index<t){n.htmlElement.style.height=e+"px";continue}let o=n.cells[0].htmlElement.offsetHeight;if(n.htmlElement.style.height=o+"px",!(n.index>t)&&n.htmlElement.offsetHeight>e){let i=Math.floor(o-(o-e)*(s.scrollTop/e-t));n.htmlElement.style.height=i+"px";for(let t=0,e=n.cells.length;t<e;++t)n.cells[t].htmlElement.style.transform=`translateY(${i-o}px)`}}i[0].setTranslateY(r);for(let t=1,e=n-1;t<e;++t)r+=i[t-1].htmlElement.offsetHeight,i[t].setTranslateY(r);let o=i[n-1],l=i[n-2];l&&l.index===o.index-1&&o.setTranslateY(l.htmlElement.offsetHeight+r)}reflowRows(){let t=this.viewport.rows;if(!(t.length<1)){for(let e=0,i=t.length;e<i;++e)t[e].reflow();this.adjustRowHeights()}}getDefaultRowHeight(){let t=new iR(this.viewport,0);t.htmlElement.style.position="absolute",t.htmlElement.classList.add(eS.getClassName("mockedRow")),this.viewport.tbodyElement.appendChild(t.htmlElement),t.render();let e=t.htmlElement.offsetHeight;return t.destroy(),e}},{makeHTMLElement:iI}=eN,{fireEvent:iP}=B,iD=class{constructor(t){this.isResizing=!1,this.handles=[],this.onDocumentMouseMove=t=>{if(!this.draggedResizeHandle||!this.draggedColumn)return;let e=t.pageX-(this.dragStartX||0),i=this.viewport;i.columnResizing.resize(this,e),i.reflow(),i.rowsVirtualizer.adjustRowHeights(),iP(this.draggedColumn,"afterResize",{target:this.draggedColumn,originalEvent:t})},this.onDocumentMouseUp=()=>{this.draggedColumn?.header?.htmlElement?.classList.remove(eS.getClassName("resizedColumn")),this.draggedResizeHandle?.matches(":hover")||this.draggedResizeHandle?.classList.remove("hovered"),this.dragStartX=void 0,this.draggedColumn=void 0,this.draggedResizeHandle=void 0,this.columnStartWidth=void 0,this.nextColumnStartWidth=void 0,requestAnimationFrame(()=>{this.isResizing=!1})},this.viewport=t,document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp)}renderColumnDragHandles(t,e){let i=t.viewport;if(i.columnsResizer){let s=iI("div",{className:eS.getClassName("resizerHandles")},e.htmlElement);s.setAttribute("aria-hidden",!0),i.columnsResizer?.addHandleListeners(s,t)}}addHandleListeners(t,e){let i=[{eventName:"mousedown",listener:i=>{let s=e.viewport;this.isResizing=!0,t.classList.add("hovered"),s.reflow(),this.dragStartX=i.pageX,this.draggedColumn=e,this.draggedResizeHandle=t,this.columnStartWidth=e.getWidth(),this.nextColumnStartWidth=s.columns[e.index+1]?.getWidth(),e.header?.htmlElement.classList.add(eS.getClassName("resizedColumn"))}},{eventName:"mouseover",listener:()=>{this.draggedResizeHandle||t.classList.add("hovered")}},{eventName:"mouseout",listener:()=>{this.draggedResizeHandle||t.classList.remove("hovered")}}];for(let{eventName:e,listener:s}of i)t.addEventListener(e,s);this.handles.push([t,i])}removeEventListeners(){document.removeEventListener("mousemove",this.onDocumentMouseMove),document.removeEventListener("mouseup",this.onDocumentMouseUp);for(let t=0,e=this.handles.length;t<e;t++){let[e,i]=this.handles[t];for(let{eventName:t,listener:s}of i)e.removeEventListener(t,s)}}},{makeHTMLElement:ik}=eN,{fireEvent:iH,getStyle:iz,defined:iB}=B,iF=class{constructor(t,e){this.columns=[],this.rows=[],this.onTBodyFocus=t=>{t.preventDefault(),this.rows[this.rowsVirtualizer.rowCursor-this.rows[0].index]?.cells[0]?.htmlElement.focus()},this.onResize=()=>{this.reflow()},this.onScroll=()=>{this.virtualRows&&this.rowsVirtualizer.scroll(),this.header?.scrollHorizontally(this.tbodyElement.scrollLeft)},this.grid=t,this.tableElement=e,this.dataTable=this.grid.presentationTable;let i=t.options,s=i?.rendering?.table?.className;this.columnResizing=tG.initMode(this),this.virtualRows=this.shouldVirtualizeRows(),i?.rendering?.header?.enabled&&(this.theadElement=ik("thead",{},e)),this.tbodyElement=ik("tbody",{},e),this.virtualRows&&e.classList.add(eS.getClassName("virtualization")),i?.rendering?.columns?.resizing?.enabled&&(this.columnsResizer=new iD(this)),s&&e.classList.add(...s.split(/\s+/g)),e.classList.add(eS.getClassName("scrollableContent")),this.loadColumns(),this.rowsVirtualizer=new iA(this),this.init(),this.resizeObserver=new ResizeObserver(this.onResize),this.resizeObserver.observe(e),this.tbodyElement.addEventListener("scroll",this.onScroll),this.tbodyElement.addEventListener("focus",this.onTBodyFocus)}init(){iH(this,"beforeInit"),this.setTbodyMinHeight(),this.grid.options?.rendering?.header?.enabled&&(this.header=new iN(this),this.header.render()),this.rowsVirtualizer.initialRender(),iH(this,"afterInit")}setTbodyMinHeight(){let{options:t}=this.grid,e=t?.rendering?.rows?.minVisibleRows,i=this.tbodyElement;iB(e)&&!iz(i,"min-height",!0)&&(i.style.minHeight=e*this.rowsVirtualizer.defaultRowHeight+"px")}shouldVirtualizeRows(){let{grid:t}=this,e=t.userOptions.rendering?.rows;if(iB(e?.virtualization))return e.virtualization;let i=Number(t.dataTable?.rowCount),s=e?.virtualizationThreshold??50,n=t.pagination?.currentPageSize;return n?n>=s:i>=s}loadColumns(){let t,{enabledColumns:e}=this.grid;if(e){for(let i=0,s=e.length;i<s;++i)t=e[i],this.columns.push(new eV(this,t,i));this.columnResizing.loadColumns()}}async updateRows(){let t,e=this;e.focusCursor&&(t=e.dataTable.getOriginalRowIndex(e.focusCursor[0])),e.grid.pagination?.clampCurrentPage();let i=(e.rows[e.rows.length-1]?.index??-1)+1;for(let t of(await e.grid.querying.proceed(),e.dataTable=e.grid.presentationTable,e.columns))t.loadData();let s=this.shouldVirtualizeRows(),n=!1;if(this.virtualRows!==s&&(this.virtualRows=s,e.tableElement.classList.toggle(eS.getClassName("virtualization"),s),n=!0),n||i!==e.dataTable.rowCount)e.rowsVirtualizer.rerender();else for(let t=0,i=e.rows.length;t<i;++t)e.rows[t].update();if(e.grid.pagination?.updateControls(),e.reflow(),void 0!==t&&e.focusCursor){let i=e.dataTable.getLocalRowIndex(t);void 0!==i&&(e.scrollToRow(i),setTimeout(()=>{iB(e.focusCursor?.[1])&&e.rows[i-e.rows[0].index]?.cells[e.focusCursor[1]].htmlElement.focus()}))}}reflow(){this.columnResizing.reflow(),this.header?.reflow(),this.rowsVirtualizer.reflowRows(),this.grid.pagination?.reflow(),this.grid.popups.forEach(t=>{t.reflow()})}scrollToRow(t){if(this.virtualRows){this.tbodyElement.scrollTop=t*this.rowsVirtualizer.defaultRowHeight;return}let e="."+eS.getClassName("rowElement"),i=this.tbodyElement.querySelectorAll(e)[0].getBoundingClientRect().top;this.tbodyElement.scrollTop=this.tbodyElement.querySelectorAll(e)[t].getBoundingClientRect().top-i}getRatioFromWidth(t){return t/this.tbodyElement.clientWidth}getWidthFromRatio(t){return this.tbodyElement.clientWidth*t}destroy(){this.tbodyElement.removeEventListener("focus",this.onTBodyFocus),this.tbodyElement.removeEventListener("scroll",this.onScroll),this.resizeObserver.disconnect(),this.columnsResizer?.removeEventListeners(),this.header?.destroy();for(let t=0,e=this.rows.length;t<e;++t)this.rows[t].destroy();iH(this,"afterDestroy")}getStateMeta(){return{scrollTop:this.tbodyElement.scrollTop,scrollLeft:this.tbodyElement.scrollLeft,columnResizing:this.columnResizing,focusCursor:this.focusCursor}}applyStateMeta(t){if(this.tbodyElement.scrollTop=t.scrollTop,this.tbodyElement.scrollLeft=t.scrollLeft,t.focusCursor){let[e,i]=t.focusCursor,s=this.rows[e-this.rows[0].index];s?.cells[i]?.htmlElement.focus()}}setFocusAnchorCell(t){this.focusAnchorCell?.htmlElement.setAttribute("tabindex","-1"),this.focusAnchorCell=t,this.focusAnchorCell.htmlElement.setAttribute("tabindex","0")}getColumn(t){let e=this.grid.enabledColumns;if(!e)return;let i=e.indexOf(t);if(!(i<0))return this.columns[i]}getRow(t){return this.rows.find(e=>e.id===t)}},{addEvent:iW,fireEvent:ij,merge:iU}=B;class iq extends tQ{constructor(t,...e){super(),this.chain=e,this.options=iU(iq.defaultOptions,t);let i=this.options.chain||[];for(let t=0,s=i.length,n,r;t<s;++t)(n=i[t]).type&&(r=tQ.types[n.type])&&e.push(new r(n))}add(t,e){this.emit({type:"addModifier",detail:e,modifier:t}),this.chain.push(t),this.emit({type:"addModifier",detail:e,modifier:t})}clear(t){this.emit({type:"clearChain",detail:t}),this.chain.length=0,this.emit({type:"afterClearChain",detail:t})}async modify(t,e){let i=this.options.reverse?this.chain.slice().reverse():this.chain.slice();t.modified||(t.modified=t.clone(!1,e));let s=t;for(let n=0,r=i.length;n<r;++n){try{await i[n].modify(s,e)}catch(i){throw this.emit({type:"error",detail:e,table:t}),i}s=s.getModified()}return t.modified=s,t}modifyTable(t,e){this.emit({type:"modify",detail:e,table:t});let i=this.options.reverse?this.chain.reverse():this.chain.slice(),s=t.getModified();for(let t=0,n=i.length;t<n;++t)s=i[t].modifyTable(s,e).getModified();return t.modified=s,this.emit({type:"afterModify",detail:e,table:t}),t}remove(t,e){let i=this.chain;this.emit({type:"removeModifier",detail:e,modifier:t}),i.splice(i.indexOf(t),1),this.emit({type:"afterRemoveModifier",detail:e,modifier:t})}emit(t){ij(this,t.type,t)}on(t,e){return iW(this,t,e)}}iq.defaultOptions={type:"Chain"},tQ.registerType("Chain",iq);let{merge:iY}=B;class iV extends tQ{static ascending(t,e){return(t||0)<(e||0)?-1:+((t||0)>(e||0))}static descending(t,e){return(e||0)<(t||0)?-1:+((e||0)>(t||0))}static compareFactory(t,e){return e?"desc"===t?(t,i)=>-e(t,i):e:"asc"===t?iV.ascending:iV.descending}constructor(t){super(),this.options=iY(iV.defaultOptions,t)}getRowReferences(t){let e=t.getRows(),i=[];for(let t=0,s=e.length;t<s;++t)i.push({index:t,row:e[t]});return i}modifyTable(t,e){this.emit({type:"modify",detail:e,table:t});let i=t.getColumnIds(),s=t.getRowCount(),n=this.getRowReferences(t),{direction:r,orderByColumn:o,orderInColumn:l,compare:a}=this.options,h=iV.compareFactory(r,a),d=i.indexOf(o),u=t.getModified();if(-1!==d&&n.sort((t,e)=>h(t.row[d],e.row[d])),l){let t=[];for(let e=0;e<s;++e)t[n[e].index]=e;u.setColumns({[l]:t})}else{let e,i=[],r=[];for(let o=0;o<s;++o)e=n[o],i.push(t.getOriginalRowIndex(e.index)),r.push(e.row);u.setRows(r,0),u.setOriginalRowIndexes(i)}return this.emit({type:"afterModify",detail:e,table:t}),t}}iV.defaultOptions={type:"Sort",direction:"desc",orderByColumn:"y"},tQ.registerType("Sort",iV);let i$=class{constructor(t){this.querying=t}setSorting(t,e){(this.currentSorting?.columnId!==e||this.currentSorting?.order!==t)&&(this.querying.shouldBeUpdated=!0,this.currentSorting={columnId:e,order:t}),this.modifier=this.createModifier()}getSortingOptions(){let t,{columnOptionsMap:e}=this.querying.grid;if(!e)return{order:null};let i=Object.keys(e),s=null;for(let n=i.length-1;n>-1;--n){let r=i[n],o=e[r]?.options||{},l=o.sorting?.order;if(l){if(t){console.warn(`Grid: Only one column can be sorted at a time. Data will be sorted only by the last found column with the sorting order defined in the options: "${t}".`);break}s=l,t=r}}return{columnId:t,order:s}}loadOptions(){let t=this.getSortingOptions();(t.columnId!==this.initialSorting?.columnId||t.order!==this.initialSorting?.order)&&(this.initialSorting=t,this.setSorting(t.order,t.columnId))}createModifier(){if(!this.currentSorting)return;let{columnId:t,order:e}=this.currentSorting;if(!e||!t)return;let i=this.querying.grid;return new iV({orderByColumn:t,direction:e,compare:i.columnOptionsMap?.[t]?.options?.sorting?.compare||i.options?.columnDefaults?.sorting?.compare})}},{isFunction:i_,merge:iG}=B;class iK extends tQ{static compile(t){if(i_(t))return t;let e=t.operator;switch(e){case"and":{let e=t.conditions.map(t=>this.compile(t));return(t,i,s)=>e.every(e=>e(t,i,s))}case"or":{let e=t.conditions.map(t=>this.compile(t));return(t,i,s)=>e.some(e=>e(t,i,s))}case"not":{let e=this.compile(t.condition);return(t,i,s)=>!e(t,i,s)}}let{columnId:i,value:s}=t;switch(e){case"==":return t=>t[i]==s;case"===":return t=>t[i]===s;case"!=":return t=>t[i]!=s;case"!==":return t=>t[i]!==s;case">":return t=>(t[i]||0)>(s||0);case">=":return t=>(t[i]||0)>=(s||0);case"<":return t=>(t[i]||0)<(s||0);case"<=":return t=>(t[i]||0)<=(s||0);case"empty":return t=>null===t[i]||""===t[i]}let{ignoreCase:n}=t,r=t=>{let e=""+t;return n??!0?e.toLowerCase():e};return"contains"===e?t=>r(t[i]).includes(r(s)):t=>r(t[i])[e](r(s))}constructor(t){super(),this.options=iG(iK.defaultOptions,t)}modifyTable(t,e){this.emit({type:"modify",detail:e,table:t});let{condition:i}=this.options;if(!i)return t;let s=iK.compile(i),n=t.getModified(),r=[],o=[];for(let e=0,i=t.getRowCount();e<i;++e){let i=t.getRowObject(e);i&&s(i,t,e)&&(r.push(i),o.push(t.getOriginalRowIndex(e)))}return n.deleteRows(),n.setRows(r),n.setOriginalRowIndexes(o),this.emit({type:"afterModify",detail:e,table:t}),t}}iK.defaultOptions={type:"Filter"},tQ.registerType("Filter",iK);let{isString:iZ}=B;class iX{constructor(t){this.columnConditions={},this.querying=t}static mapOptionsToFilter(t,e){let{condition:i,value:s}=e,n=iZ(s),r=n?s:"";if(void 0!==s&&(!n||r)||["empty","notEmpty","true","false"].includes(i??""))switch(i){case"contains":return{columnId:t,operator:"contains",value:r};case"doesNotContain":return{operator:"not",condition:{columnId:t,operator:"contains",value:r}};case"equals":return{columnId:t,operator:"===",value:s};case"doesNotEqual":return{columnId:t,operator:"!==",value:s};case"beginsWith":return{columnId:t,operator:"startsWith",value:r};case"endsWith":return{columnId:t,operator:"endsWith",value:r};case"greaterThan":case"after":return{columnId:t,operator:">",value:s};case"greaterThanOrEqualTo":return{columnId:t,operator:">=",value:s};case"lessThan":case"before":return{columnId:t,operator:"<",value:s};case"lessThanOrEqualTo":return{columnId:t,operator:"<=",value:s};case"empty":return{columnId:t,operator:"empty",value:s};case"notEmpty":return{operator:"not",condition:{columnId:t,operator:"empty",value:s}};case"true":return{columnId:t,operator:"===",value:!0};case"false":return{columnId:t,operator:"===",value:!1}}}loadOptions(){let t=this.querying.grid.columnOptionsMap,e={};if(t){let i=Object.keys(t);for(let s=0,n=i.length;s<n;++s){let n=i[s],r=t[n]?.options?.filtering;if(!r)continue;let o=iX.mapOptionsToFilter(n,r);o&&(e[n]=o)}}this.columnConditions=e,this.updateModifier()}addColumnFilterCondition(t,e){let i=iX.mapOptionsToFilter(t,e);i?this.columnConditions[t]=i:delete this.columnConditions[t],this.updateModifier()}clearColumnFiltering(t){t?delete this.columnConditions[t]:this.columnConditions={},this.updateModifier()}updateModifier(){let t=Object.values(this.columnConditions);if(this.querying.shouldBeUpdated=!0,t.length<1)return void delete this.modifier;this.modifier=new iK({condition:{operator:"and",conditions:t}})}}let{merge:iJ}=B;class iQ extends tQ{constructor(t){super(),this.options=iJ(iQ.defaultOptions,t)}modifyTable(t,e){this.emit({type:"modify",detail:e,table:t});let{start:i,end:s}=this.options;i=Math.max(0,i||0);let n=Math.max((s=Math.min(s||1/0,t.getRowCount()))-i,0),r=t.getModified();return r.deleteRows(),r.setRows(t.getRows(i,n)),r.setOriginalRowIndexes(Array.from({length:n},(e,s)=>t.getOriginalRowIndex(i+s))),this.emit({type:"afterModify",detail:e,table:t}),t}}iQ.defaultOptions={type:"Range",start:0,end:1/0},tQ.registerType("Range",iQ);let i0=class{constructor(t){this.querying=t}setRange(t){this.currentPage=t,this.querying.shouldBeUpdated=!0}loadOptions(){let t=this.querying.grid.pagination;t?.options.enabled&&this.currentPage!==t.currentPage&&(this.currentPage=t.currentPage,this.setRange(this.currentPage))}createModifier(t=this.querying.grid.dataTable?.rowCount||0){let e=this.currentPage||1,i=this.querying.grid.pagination?.currentPageSize;if(!i)return;let s=(e-1)*i,n=Math.min(s+i,t);return this.totalItems=t,new iQ({start:s,end:n})}reset(){delete this.currentPage,this.querying.shouldBeUpdated=!0}},i1=class{constructor(t){this.shouldBeUpdated=!1,this.grid=t,this.filtering=new iX(this),this.sorting=new i$(this),this.pagination=new i0(this)}async proceed(t=!1){(t||this.shouldBeUpdated)&&await this.modifyData()}loadOptions(){this.filtering.loadOptions(),this.sorting.loadOptions(),this.pagination.loadOptions()}willNotModify(){return!this.sorting.modifier&&!this.filtering.modifier}getGroupedModifiers(){let t=[];return this.sorting.modifier&&t.push(this.sorting.modifier),this.filtering.modifier&&t.push(this.filtering.modifier),t}async modifyData(){let t,e=this.grid.dataTable;if(!e)return;let i=this.getGroupedModifiers();if(i.length>0){let s=new iq({},...i),n=e.clone();await s.modify(n.getModified()),t=n.getModified()}else t=e.getModified();let s=this.pagination.createModifier(t.rowCount);s&&(t=t.clone(),await s.modify(t),t=t.getModified()),this.grid.presentationTable=t,this.shouldBeUpdated=!1}},i3={first:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none"><path d="M5 9L1 5L5 1M9 9L5 5L9 1" stroke="currentColor" stroke-width="1.34" stroke-linecap="round" stroke-linejoin="round"/></svg>',previous:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 8 10" fill="none"><path d="M5 9L1 5L5 1" stroke="currentColor" stroke-width="1.34" stroke-linecap="round" stroke-linejoin="round"/></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 4 10" fill="none"><path d="M1 1L5 5L1 9" stroke="currentColor" stroke-width="1.34" stroke-linecap="round" stroke-linejoin="round"/></svg>',last:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none"><path d="M5 1L9 5L5 9M1 1L5 5L1 9" stroke="currentColor" stroke-width="1.34" stroke-linecap="round" stroke-linejoin="round"/></svg>'},{makeHTMLElement:i6,formatText:i2}=eN,{merge:i5,fireEvent:i7,isObject:i4,defined:i9}=B;class i8{constructor(t,e,i={}){this.currentPage=1,this.grid=t,this.options=i5(i8.defaultOptions,e);let s=this.options.controls.pageSizeSelector;this.pageSizeOptions=i4(s)?s.options:i8.defaultOptions.controls.pageSizeSelector.options,this.currentPageSize=i.currentPageSize||this.options.pageSize||this.pageSizeOptions[0],this.lang=i5(eH.defaultOptions.pagination,this.grid.options?.lang?.pagination),i.currentPage&&(this.currentPage=i.currentPage)}get totalItems(){return this.grid.querying.pagination.totalItems||0}get totalPages(){return Math.ceil(this.totalItems/this.currentPageSize)||1}render(){let t=this.options.position,e=this.grid;this.oldTotalItems=this.totalItems,e.tableElement?.setAttribute("aria-current","page"),this.updateA11yRowsCount(this.currentPageSize),"string"==typeof t&&t.startsWith("#")?this.renderCustomContainer(t):("footer"===t&&this.renderFooter(),this.contentWrapper=i6("nav",{className:eS.getClassName("paginationWrapper")},"footer"===t?this.paginationContainer:e.contentWrapper),this.contentWrapper.setAttribute("aria-label","Results pagination")),this.clampCurrentPage(),this.renderPageInfo(),this.renderControls(),this.renderPageSizeSelector(),this.updateButtonStates()}renderFooter(){let t=this.grid.tableElement;if(!t)return;let e=i6("tfoot",{},t),i=i6("tr",{},e);this.paginationContainer=i6("td",{},i),this.paginationContainer.setAttribute("colSpan",(this.grid.enabledColumns||[]).length.toString()),this.reflow()}renderCustomContainer(t){let e=document.querySelector(t);if(!e)return void console.warn(`Pagination: Custom container with ID "${t}" not found.`);this.paginationContainer=e,this.contentWrapper=i6("div",{className:eS.getClassName("paginationContainer")},e)}renderPageInfo(){let t=this.options.controls?.pageInfo;!1===t||i4(t)&&!1===t.enabled||(this.pageInfoElement=i6("div",{className:eS.getClassName("paginationPageInfo")},this.contentWrapper),this.updatePageInfo())}updatePageInfo(){if(!this.pageInfoElement)return;let t=(this.currentPage-1)*this.currentPageSize+1,e=Math.min(this.currentPage*this.currentPageSize,this.totalItems),i=i2(this.lang.pageInfo,{start:t,end:e,total:this.totalItems,currentPage:this.currentPage,totalPages:this.totalPages});this.pageInfoElement.innerHTML=i}renderControls(){let t=i6("div",{className:eS.getClassName("paginationControls")},this.contentWrapper);this.options.controls?.firstLastButtons&&this.renderFirstButton(t),this.options.controls?.previousNextButtons&&this.renderPrevButton(t),this.options.controls?.pageButtons&&this.renderPageNumbers(t),this.renderMobilePageSelector(t),this.options.controls?.previousNextButtons&&this.renderNextButton(t),this.options.controls?.firstLastButtons&&this.renderLastButton(t)}updateControls(){this.oldTotalItems!==this.totalItems&&(this.updatePageInfo(),this.updatePageNumbers(),this.updateButtonStates(),this.updateA11yRowsCount(this.currentPageSize),this.oldTotalItems=this.totalItems)}renderFirstButton(t){let e=this.options.controls?.firstLastButtons;!1===e||i4(e)&&!1===e.enabled||(this.firstButton=i6("button",{innerHTML:i3.first,className:eS.getClassName("paginationButton")+" "+eS.getClassName("paginationFirstButton")},t),this.firstButton.title=this.lang.firstPage,this.firstButton.setAttribute("aria-label",this.lang.firstPage),this.firstButton.addEventListener("click",()=>{this.goToPage(1)}),this.setButtonState(this.firstButton,1===this.currentPage))}renderPrevButton(t){let e=this.options.controls?.previousNextButtons;!1===e||i4(e)&&!1===e.enabled||(this.prevButton=i6("button",{innerHTML:i3.previous,className:eS.getClassName("paginationButton")+" "+eS.getClassName("paginationPrevButton")},t),this.prevButton.title=this.lang.previousPage,this.prevButton.setAttribute("aria-label",this.lang.previousPage),this.prevButton.addEventListener("click",()=>{this.goToPage(this.currentPage-1)}),this.setButtonState(this.prevButton,1===this.currentPage))}renderNextButton(t){let e=this.options.controls?.previousNextButtons;!1===e||i4(e)&&!1===e.enabled||(this.nextButton=i6("button",{innerHTML:i3.next,className:eS.getClassName("paginationButton")+" "+eS.getClassName("paginationNextButton")},t),this.nextButton.title=this.lang.nextPage,this.nextButton.setAttribute("aria-label",this.lang.nextPage),this.nextButton.addEventListener("click",()=>{this.goToPage(this.currentPage+1)}),this.setButtonState(this.nextButton,this.currentPage>=this.totalPages))}renderLastButton(t){let e=this.options.controls?.firstLastButtons;!1===e||i4(e)&&!1===e.enabled||(this.lastButton=i6("button",{innerHTML:i3.last,className:eS.getClassName("paginationButton")+" "+eS.getClassName("paginationLastButton")},t),this.lastButton.title=this.lang.lastPage,this.lastButton.setAttribute("aria-label",this.lang.lastPage),this.lastButton.addEventListener("click",()=>{this.goToPage(this.totalPages)}),this.setButtonState(this.lastButton,this.currentPage>=this.totalPages))}renderPageNumbers(t){let e=this.options.controls?.pageButtons;!1===e||i4(e)&&!1===e.enabled||(this.pageNumbersContainer=i6("div",{className:eS.getClassName("paginationPageButton")},t),this.updatePageNumbers())}updatePageNumbers(){if(!this.pageNumbersContainer)return;this.pageNumbersContainer.innerHTML=J.emptyHTML;let t=this.options.controls?.pageButtons,e=i4(t)?t.count:i8.defaultOptions.controls.pageButtons.count,i=this.totalPages,s=this.currentPage;if(i<=e)for(let t=1;t<=i;t++)this.createPageButton(t,t===s);else{let t=[],n=s>=i-2;if(s<=3){let s=e-2,n=Math.min(s,i-1);for(let e=1;e<=n;e++)t.push({type:"button",page:e});i>s+1&&(t.push({type:"ellipsis"}),t.push({type:"button",page:i}))}else if(n){let s=i-(e-2)+1;for(t.push({type:"button",page:1}),t.push({type:"ellipsis"});s<=i;s++)t.push({type:"button",page:s})}else{t.push({type:"button",page:1});let n=e-4,r=Math.floor(n/2),o=Math.max(2,s-r),l=Math.min(i-1,s+r);l-o+1>n&&(2===o?l=o+n-1:o=l-n+1);let a=o>2,h=l<i-1;a||h?a?h||(o=Math.max(2,(l=i-1)-(e-3)+1)):l=Math.min(i-1,(o=2)+(e-3)-1):l=Math.min(i-1,(o=2)+(e-2)-1),a&&t.push({type:"ellipsis"});for(let e=o;e<=l;e++)t.push({type:"button",page:e});h&&t.push({type:"ellipsis"}),t.push({type:"button",page:i})}t.forEach(t=>{"button"===t.type&&i9(t.page)?this.createPageButton(t.page,t.page===s):"ellipsis"===t.type&&this.createEllipsis()})}this.mobilePageSelector&&(this.mobilePageSelector.value=this.currentPage.toString())}createPageButton(t,e){if(!this.pageNumbersContainer)return;let i=i6("button",{innerHTML:t.toString(),className:eS.getClassName(e?"paginationPageButtonActive":"paginationPageButton")},this.pageNumbersContainer);i.title=i2(this.lang.pageNumber,{page:t}),i.setAttribute("aria-label",i2(this.lang.pageNumber,{page:t})),i.addEventListener("click",()=>{this.goToPage(t)})}createEllipsis(){if(!this.pageNumbersContainer)return;let t=i6("span",{innerHTML:"...",className:eS.getClassName("paginationEllipsis")},this.pageNumbersContainer);t.title=this.lang.ellipsis,t.setAttribute("aria-hidden",!0)}renderPageSizeSelector(){let t=this.options.controls.pageSizeSelector;if(!1===t||i4(t)&&!1===t.enabled)return;let e=i6("div",{className:eS.getClassName("paginationPageSizeContainer")},this.contentWrapper);i6("span",{innerHTML:this.lang.pageSizeLabel},e),this.pageSizeSelect=i6("select",{className:eS.getClassName("paginationPageSizeSelect")},e),this.pageSizeOptions.forEach(t=>{let e=document.createElement("option");e.value=t.toString(),e.innerHTML=t.toString(),t===this.currentPageSize&&(e.selected=!0),this.pageSizeSelect?.appendChild(e)}),this.pageSizeSelect.addEventListener("change",()=>{this.pageSizeSelect&&this.setPageSize(parseInt(this.pageSizeSelect.value,10))}),this.renderMobilePageSizeSelector(e)}async setPageSize(t){let e=this.currentPageSize,i=this.grid.options?.lang?.accessibility;i7(this,"beforePageSizeChange",{pageSize:e,newPageSize:t}),this.currentPageSize=t,this.currentPage=1,await this.updateGridPagination(),this.updatePageInfo(),this.updatePageNumbers(),this.updateButtonStates(),this.updateA11yRowsCount(this.currentPageSize),this.grid.accessibility?.announce(i?.pagination?.announcements?.pageSizeChange+" "+t),this.mobilePageSizeSelector&&(this.mobilePageSizeSelector.value=this.currentPageSize.toString()),i7(this,"afterPageSizeChange",{pageSize:t,previousPageSize:e})}async goToPage(t){let e=this.grid.options?.lang?.accessibility;if(t<1||t>this.totalPages||t===this.currentPage)return;let i=this.currentPage;i7(this,"beforePageChange",{currentPage:this.currentPage,nextPage:t,pageSize:this.currentPageSize}),this.currentPage=t,await this.updateGridPagination(),this.updatePageInfo(),this.updatePageNumbers(),this.updateButtonStates(),this.grid.accessibility?.announce(e?.pagination?.announcements?.pageChange+" "+this.currentPage),i7(this,"afterPageChange",{currentPage:this.currentPage,previousPage:i,pageSize:this.currentPageSize})}async updateGridPagination(t=!1){if(!this.grid.querying?.pagination)return;this.grid.querying.pagination.setRange(t?1:this.currentPage),this.grid.querying.shouldBeUpdated=!0,await this.grid.querying.proceed(!0),await this.grid.viewport?.updateRows(),this.grid.viewport?.header?.reflow();let e=this.grid.viewport?.tbodyElement;e&&(e.scrollTop=0)}clampCurrentPage(){this.currentPage>this.totalPages&&(this.currentPage=this.totalPages,this.grid.querying.pagination.setRange(this.currentPage))}updateButtonStates(){this.firstButton&&this.setButtonState(this.firstButton,1===this.currentPage),this.prevButton&&this.setButtonState(this.prevButton,1===this.currentPage),this.nextButton&&this.setButtonState(this.nextButton,this.currentPage>=this.totalPages),this.lastButton&&this.setButtonState(this.lastButton,this.currentPage>=this.totalPages)}async updatePage(t=!0){let e=t?this.currentPage+1:this.currentPage-1;await this.goToPage(e)}setButtonState(t,e){e?(t.classList.add(eS.getClassName("paginationButtonDisabled")),t.setAttribute("disabled","disabled")):(t.classList.remove(eS.getClassName("paginationButtonDisabled")),t.removeAttribute("disabled"))}reflow(){let t=this.options.position;if(this.paginationContainer&&"footer"===t){this.paginationContainer.style.width=this.grid.tableElement?.offsetWidth+"px";return}}destroy(){"footer"===this.options.position?this.paginationContainer?.parentElement?.parentElement?.remove():this.contentWrapper?.remove(),this.grid.querying.pagination.reset()}renderMobilePageSelector(t){let e=this.totalPages;if(e<=1)return;let i=i6("select",{className:eS.getClassName("paginationMobileSelector")},t);for(let t=1;t<=e;t++){let s=i6("option",{},i);s.value=t.toString(),s.textContent=`Page ${t} of ${e}`}i.value=this.currentPage.toString(),this.mobilePageSelector=i,i.addEventListener("change",()=>{let t=parseInt(i.value,10);t!==this.currentPage&&this.goToPage(t)})}renderMobilePageSizeSelector(t){let e=i6("select",{className:eS.getClassName("paginationMobilePageSizeSelector")},t);this.pageSizeOptions.forEach(t=>{let i=i6("option",{},e);i.value=t.toString(),i.textContent=`${t} ${this.lang.pageSizeLabel}`,t===this.currentPageSize&&(i.selected=!0)}),this.mobilePageSizeSelector=e,e.addEventListener("change",()=>{this.mobilePageSizeSelector&&this.setPageSize(parseInt(this.mobilePageSizeSelector.value,10))})}updateA11yRowsCount(t){let e=this.grid;e.tableElement?.setAttribute("aria-rowcount",t||this.totalItems)}}i8.defaultOptions={enabled:!1,pageSize:10,position:"bottom",controls:{pageSizeSelector:{enabled:!0,options:[10,20,50,100]},pageInfo:{enabled:!0},firstLastButtons:{enabled:!0},previousNextButtons:{enabled:!0},pageButtons:{enabled:!0,count:7}}};let{makeHTMLElement:st,setHTMLContent:se}=eN,{extend:si,fireEvent:ss,getStyle:sn,merge:sr,pick:so,isObject:sl}=B;class sa{static grid(t,e,i){return i?new Promise(i=>{new sa(t,e,t=>{i(t)})}):new sa(t,e)}constructor(t,e,i){this.columnOptionsMap={},this.userOptions={},this.initialContainerHeight=0,this.popups=new Set,this.dataTableEventDestructors=[],this.loadUserOptions(e),this.id=this.options?.id||B.uniqueKey(),this.querying=new i1(this),this.locale=this.options?.lang?.locale||this.container?.closest("[lang]")?.lang,this.time=new tp(si(this.options?.time,{locale:this.locale}),this.options?.lang),ss(this,"beforeLoad"),sa.grids.push(this),this.initContainers(t),this.initAccessibility(),this.initPagination(),this.loadDataTable(),this.querying.loadOptions(),this.querying.proceed().then(()=>{this.renderViewport(),i?.(this),ss(this,"afterLoad")})}initAccessibility(){this.accessibility?.destroy(),delete this.accessibility,this.options?.accessibility?.enabled&&(this.accessibility=new eD(this))}initPagination(){let t;if(this.pagination){let{currentPageSize:e,currentPage:i}=this.pagination||{};t={currentPageSize:e,currentPage:i}}this.pagination?.destroy(),delete this.pagination;let e=this.options?.pagination,i=sl(e)?e:{enabled:e};i?.enabled&&(this.pagination=new i8(this,i,t))}initContainers(t){let e="string"==typeof t?eS.win.document.getElementById(t):t;if(!e)return void console.error(`
                Rendering div not found. It is unable to find the HTML element
                to render the Grid in.
            `);this.initialContainerHeight=sn(e,"height",!0)||0,this.container=e,this.container.innerHTML=J.emptyHTML,this.contentWrapper=st("div",{className:eS.getClassName("container")},this.container)}loadUserOptions(t,e=!1){(t=sr(t)).columns&&(e?this.setColumnOptionsOneToOne(t.columns):this.setColumnOptions(t.columns),delete t.columns),this.userOptions=sr(this.userOptions,t),this.options=sr(this.options??eH.defaultOptions,this.userOptions);let i=this.options?.columns;if(!i)return;let s={};for(let t=0,e=i?.length??0;t<e;++t)s[i[t].id]={index:t,options:i[t]};this.columnOptionsMap=s}setColumnOptions(t,e=!1){this.userOptions.columns||(this.userOptions.columns=this.options?.columns??[]);let i=this.userOptions.columns;for(let s=0,n=t.length;s<n;++s){let n=t[s],r=this.columnOptionsMap?.[n.id]?.index??-1;if(Object.keys(n).length<2){e&&-1!==r&&i.splice(r,1);continue}-1===r?i.push(n):e?i[r]=n:sr(!0,i[r],n)}i.length<1&&delete this.userOptions.columns}setColumnOptionsOneToOne(t){let e,i=this.userOptions.columns,s=[];for(let n=0,r=t.length;n<r;++n){let r=t[n],o=i?.findIndex(t=>t.id===r.id);void 0!==o&&-1!==o&&(e=i?.[o]);let l=sr(e??{},r);Object.keys(l).length>1&&s.push(l)}this.userOptions.columns=s}async update(t={},e=!0,i=!1){if(this.loadUserOptions(t,i),(!this.dataTable||t.dataTable)&&(this.userOptions.dataTable=t.dataTable,(this.options??{}).dataTable=t.dataTable,this.loadDataTable(),this.querying.shouldBeUpdated=!0),!e)return;this.initAccessibility(),this.initPagination(),this.querying.loadOptions();let s=t.lang?.locale;s&&(this.locale=s,this.time.update(si(t.time||{},{locale:this.locale}))),await this.querying.proceed(),this.renderViewport()}async updateColumn(t,e,i=!0,s=!1){this.setColumnOptions([{id:t,...e}],s),await this.update(void 0,i)}hoverRow(t){let e=this.viewport?.rows;if(!e)return;let i=this.viewport?.rows[0]?.index??0;void 0!==this.hoveredRowIndex&&e[this.hoveredRowIndex-i]?.setHoveredState(!1),void 0!==t&&e[t-i]?.setHoveredState(!0),this.hoveredRowIndex=t}hoverColumn(t){let e=this.viewport;e&&(this.hoveredColumnId&&e.getColumn(this.hoveredColumnId)?.setHoveredState(!1),t&&e.getColumn(t)?.setHoveredState(!0),this.hoveredColumnId=t)}syncRow(t){let e=this.viewport?.rows;if(!e)return;let i=this.viewport?.rows[0]?.index??0;void 0!==this.syncedRowIndex&&e[this.syncedRowIndex-i]?.setSyncedState(!1),void 0!==t&&e[t-i]?.setSyncedState(!0),this.syncedRowIndex=t}syncColumn(t){let e=this.viewport;e&&(this.syncedColumnId&&e.getColumn(this.syncedColumnId)?.setSyncedState(!1),t&&e.getColumn(t)?.setSyncedState(!0),this.syncedColumnId=t)}renderCaption(){let t=this.options?.caption,e=t?.text;e&&(this.captionElement=st("div",{className:eS.getClassName("captionElement"),id:this.id+"-caption"},this.contentWrapper),se(this.captionElement,e),t.className&&this.captionElement.classList.add(...t.className.split(/\s+/g)))}renderDescription(){let t=this.options?.description,e=t?.text;e&&(this.descriptionElement=st("div",{className:eS.getClassName("descriptionElement"),id:this.id+"-description"},this.contentWrapper),se(this.descriptionElement,e),t.className&&this.descriptionElement.classList.add(...t.className.split(/\s+/g)))}resetContentWrapper(){this.contentWrapper&&(this.contentWrapper.innerHTML=J.emptyHTML,this.contentWrapper.className=eS.getClassName("container")+" "+this.options?.rendering?.theme||"")}renderViewport(){let t=this.viewport?.getStateMeta(),e=this.pagination,i=e?.options.position;this.enabledColumns=this.getEnabledColumnIDs(),this.credits?.destroy(),this.viewport?.destroy(),delete this.viewport,this.resetContentWrapper(),ss(this,"beforeRenderViewport"),this.renderCaption(),"top"===i&&e?.render(),this.enabledColumns.length>0?(this.viewport=this.renderTable(),t&&this.viewport&&this.viewport.applyStateMeta(t)):this.renderNoData(),this.accessibility?.setA11yOptions(),"top"!==i&&e?.render(),this.renderDescription(),ss(this,"afterRenderViewport"),this.viewport?.reflow()}renderTable(){return this.tableElement=st("table",{className:eS.getClassName("tableElement")},this.contentWrapper),this.tableElement.setAttribute("role","grid"),new iF(this,this.tableElement)}renderNoData(){st("div",{className:eS.getClassName("noData"),innerText:this.options?.lang?.noData},this.contentWrapper)}getEnabledColumnIDs(){let t,{columnOptionsMap:e}=this,i=this.options?.header,s=this.getColumnIds(i||[],!1),n=this.options?.rendering?.columns?.included||(s&&s.length>0?s:this.dataTable?.getColumnIds());if(!n?.length)return[];if(!e)return n;let r=[];for(let i=0,s=n.length;i<s;++i)t=n[i],e?.[t]?.options?.enabled!==!1&&r.push(t);return r}loadDataTable(){this.dataTableEventDestructors.forEach(t=>t());let t=this.options?.dataTable;if(t?.clone){this.dataTable=t,this.presentationTable=this.dataTable.getModified();return}let e=this.dataTable=this.presentationTable=new er(t);["afterDeleteColumns","afterDeleteRows","afterSetCell","afterSetColumns","afterSetRows"].forEach(t=>{this.dataTableEventDestructors.push(e.on(t,()=>{this.querying.shouldBeUpdated=!0}))})}getColumnIds(t,e=!0){let i=[],{enabledColumns:s}=this;for(let n of t){let t="string"==typeof n?n:n.columnId;t&&(!e||s?.includes(t))&&i.push(t),"string"!=typeof n&&n.columns&&(i=i.concat(this.getColumnIds(n.columns,e)))}return i}destroy(){let t=sa.grids.findIndex(t=>t===this);this.dataTableEventDestructors.forEach(t=>t()),this.viewport?.destroy(),this.container&&(this.container.innerHTML=J.emptyHTML,this.container.classList.remove(eS.getClassName("container"))),Object.keys(this).forEach(t=>{delete this[t]}),sa.grids.splice(t,1)}showLoading(t){this.loadingWrapper||(this.loadingWrapper=st("div",{className:eS.getClassName("loadingWrapper")},this.contentWrapper),st("div",{className:eS.getClassName("loadingSpinner")},this.loadingWrapper),se(st("span",{className:eS.getClassName("loadingMessage")},this.loadingWrapper),so(t,this.options?.lang?.loading,"")))}hideLoading(){this.loadingWrapper?.remove(),delete this.loadingWrapper}getData(t=!0){let e=t?this.viewport?.dataTable:this.dataTable,i=e?.columns;if(!this.enabledColumns||!i)return"{}";for(let t of Object.keys(i))-1===this.enabledColumns.indexOf(t)&&delete i[t];return JSON.stringify(i,null,2)}getOptions(t=!0){let e=t?sr(this.userOptions):sr(this.options);return e.dataTable?.id&&(e.dataTable={columns:e.dataTable.columns}),e}}sa.grids=[];let{addEvent:sh,fireEvent:sd,merge:su}=B;class sc{constructor(t){this.options=su(sc.defaultOptions,t),this.connectors={},this.waiting={}}emit(t){sd(this,t.type,t)}getConnector(t){let e=this.connectors[t];if(e?.loaded)return Promise.resolve(e);let i=this.waiting[t];if(!i){i=this.waiting[t]=[];let e=this.getConnectorOptions(t);if(!e)throw Error(`Connector '${t}' not found.`);this.loadConnector(e).then(e=>{delete this.waiting[t];for(let t=0,s=i.length;t<s;++t)i[t][0](e)}).catch(e=>{delete this.waiting[t];for(let t=0,s=i.length;t<s;++t)i[t][1](e)})}return new Promise((t,e)=>{i.push([t,e])})}getConnectorIds(){let t=this.options.connectors,e=[];for(let i=0,s=t.length;i<s;++i)e.push(t[i].id);return e}getConnectorOptions(t){let e=this.options.connectors;for(let i=0,s=e.length;i<s;++i)if(e[i].id===t)return e[i]}isNewConnector(t){return!this.connectors[t]}loadConnector(t){return new Promise((e,i)=>{this.emit({type:"load",options:t});let s=eu.types[t.type];if(!s)throw Error(`Connector type not found. (${t.type})`);let n=this.connectors[t.id]=new s(t);n.load().then(({converter:i})=>{n.converter=i,n.loaded=!0,this.emit({type:"afterLoad",options:t}),e(n)}).catch(i)})}cancelPendingRequests(){let{connectors:t}=this;for(let e of Object.keys(t))t[e].stopPolling()}on(t,e){return sh(this,t,e)}setConnectorOptions(t){let e=this.options.connectors,i=this.connectors;this.emit({type:"setConnectorOptions",options:t});for(let i=0,s=e.length;i<s;++i)if(e[i].id===t.id){e.splice(i,1);break}i[t.id]&&(i[t.id].stopPolling(),delete i[t.id]),e.push(t),this.emit({type:"afterSetConnectorOptions",options:t})}}sc.defaultOptions={connectors:[]};let{makeHTMLElement:sm,setHTMLContent:sp}=eN;class sg{constructor(t,e){this.grid=t,this.containerElement=sm("div",{className:eS.getClassName("creditsContainer")}),this.textElement=this.renderAnchor(),this.options=e??sg.defaultOptions,this.render()}render(){let t=this.grid,e=t.contentWrapper,{text:i,href:s}=this.options;this.containerElement.remove(),this.textElement||(this.textElement=this.renderAnchor()),i&&sp(this.textElement,i),s&&this.textElement.setAttribute("href",s||""),t.descriptionElement?e?.insertBefore(this.containerElement,t.descriptionElement):e?.appendChild(this.containerElement)}renderAnchor(){let t=sm("a",{className:eS.getClassName("creditsText")},this.containerElement);return t.setAttribute("target","_blank"),t.setAttribute("alt","Highcharts logo"),t}getHeight(){return this.containerElement.offsetHeight}destroy(){this.containerElement.remove()}}sg.defaultOptions={enabled:!0,text:"",href:"https://www.highcharts.com",position:"bottom"};let{addEvent:sf,pushUnique:sy}=B;!function(t){let e;function i(){let t=new sg(this),i=t.containerElement.style;return i.setProperty("display","flex","important"),i.setProperty("padding","5px 5px 0px 5px","important"),i.setProperty("flex-direction","row-reverse","important"),(e=new MutationObserver(()=>{t.containerElement.querySelector(".hcg-credits")||t.render()})).observe(t.containerElement,{attributes:!0,childList:!0,subtree:!0}),t}function s(){e.disconnect()}t.compose=function(t,e){sy(m.composed,"CreditsLite")&&(sf(t,"afterRenderViewport",i),sf(e,"afterDestroy",s))}}(d||(d={}));let sw=d,{merge:sb}=B;class sv extends ew{constructor(t){let e=sb(sv.defaultOptions,t);super(e),this.headers=[],this.dataTypes=[],this.options=e}parse(t,e){let i=this.dataTypes,s=sb(this.options,t),{beforeParse:n,lineDelimiter:r,firstRowAsNames:o,itemDelimiter:l}=s,a,h=0,{csv:d,startRow:u,endRow:c}=s,m,p=[];if(this.emit({type:"parse",columns:p,detail:e,headers:this.headers}),d&&n&&(d=n(d)),d){if(a=d.replace(/\r\n|\r/g,"\n").split(r||"\n"),(!u||u<0)&&(u=0),(!c||c>=a.length)&&(c=a.length-1),l||(this.guessedItemDelimiter=this.guessDelimiter(a)),o){let t=a[0].split(l||this.guessedItemDelimiter||",");for(let e=0;e<t.length;e++)t[e]=t[e].trim().replace(/^["']|["']$/g,"");this.headers=t,u++}let t=0;for(h=u;h<=c;h++)"#"===a[h][0]?t++:this.parseCSVRow(p,a[h],h-u-t);i.length&&i[0].length&&"date"===i[0][1]&&!this.options.dateFormat&&this.deduceDateFormat(p[0],null,!0);for(let t=0,e=p.length;t<e;++t){m=p[t];for(let e=0,i=m.length;e<i;++e)if(m[e]&&"string"==typeof m[e]){let i=this.convertByType(m[e]);i instanceof Date&&(i=i.getTime()),p[t][e]=i}}}return p.forEach(t=>{t.length=Math.max(...p.map(t=>t.length))}),this.emit({type:"afterParse",columns:p,detail:e,headers:this.headers}),em.getColumnsCollection(p,this.headers)}parseCSVRow(t,e,i){let s=this,n=s.dataTypes,{startColumn:r,endColumn:o}=s.options,l=s.options.itemDelimiter||s.guessedItemDelimiter,{decimalPoint:a}=s.options;a&&a!==l||(a=s.guessedDecimalPoint||".");let h=0,d="",u="",c=0,m=0,p=t=>{d=e[t]},g=t=>{n.length<m+1&&n.push([t]),n[m][n[m].length-1]!==t&&n[m].push(t)},f=()=>{if(r>c||c>o){++c,u="";return}if("string"==typeof u){let t=parseFloat(u);!isNaN(t)&&isFinite(Number(u))?(u=t,g("number")):isNaN(Date.parse(u))?g("string"):(u=u.replace(/\//g,"-"),g("date"))}else g("number");if(t.length<m+1&&t.push([]),"number"!=typeof u&&"number"!==em.guessType(u,s)&&a){let t=u;u=u.replace(a,"."),"number"!==em.guessType(u,s)&&(u=t)}t[m][i]=u,u="",++m,++c};if(e.trim().length&&"#"!==e.trim()[0]){for(;h<e.length;h++){if(p(h),"#"===d&&!/^#[A-F\d]{3,3}|[A-F\d]{6,6}/i.test(e.substring(h)))return void f();if('"'===d)for(p(++h);h<e.length&&'"'!==d;)u+=d,p(++h);else d===l?f():u+=d}f()}}guessDelimiter(t){let e=0,i=0,s,n={",":0,";":0,"	":0},r=t.length;for(let s=0;s<r;s++){let r=!1,o,l,a,h="";if(s>13)break;let d=t[s];for(let t=0;t<d.length&&(o=d[t],l=d[t+1],a=d[t-1],"#"!==o);t++){if('"'===o)if(r){if('"'!==a&&'"'!==l){for(;" "===l&&t<d.length;)l=d[++t];void 0!==n[l]&&n[l]++,r=!1}}else r=!0;else void 0!==n[o]?(isNaN(Date.parse(h=h.trim()))?(isNaN(Number(h))||!isFinite(Number(h)))&&n[o]++:n[o]++,h=""):h+=o;","===o&&i++,"."===o&&e++}}return n[";"]>n[","]?s=";":(n[","]>n[";"],s=","),e>i?this.guessedDecimalPoint=".":this.guessedDecimalPoint=",",s}}sv.defaultOptions={...ew.defaultOptions,lineDelimiter:"\n",startColumn:0,endColumn:Number.MAX_VALUE,startRow:0,endRow:Number.MAX_VALUE},ew.registerType("CSV",sv);let{merge:sC,fireEvent:sE}=B;class sT extends eu{constructor(t){let e=sC(sT.defaultOptions,t);super(e),this.options=e,e.enablePolling&&this.startPolling(1e3*Math.max(e.dataRefreshRate||0,1))}emit(t){sE(this,t.type,t)}load(t){let e=this,i=e.options,{csv:s,csvURL:n,dataTables:r,decimalPoint:o}=i;return e.emit({type:"load",csv:s}),Promise.resolve(n?fetch(n,{signal:e?.pollingController?.signal}).then(t=>t.text()):s||"").then(t=>(t&&this.initConverters(t,t=>{let{firstRowAsNames:e=i.firstRowAsNames,beforeParse:s=i.beforeParse}=r?.find(e=>e.key===t)||{};return new sv(sC(i,{decimalPoint:o,firstRowAsNames:e,beforeParse:s}))},(t,e)=>t.parse({csv:e})),e.applyTableModifiers().then(()=>t))).then(i=>(e.emit({type:"afterLoad",detail:t,csv:i}),e)).catch(i=>{throw e.emit({type:"loadError",detail:t,error:i}),i})}}sT.defaultOptions={id:"csv-connector",type:"CSV",csv:"",csvURL:"",enablePolling:!1,dataRefreshRate:1,firstRowAsNames:!0},eu.registerType("CSV",sT);let{merge:sx,uniqueKey:sS}=B;class sM extends ew{constructor(t){let e=sx(sM.defaultOptions,t);super(e),this.header=[],this.options=e}parse(t,e){let i,s=sx(this.options,t),n=(s.json?.values||[]).map(t=>t.slice());if(0===n.length)return{};this.header=[],this.emit({type:"parse",columns:[],detail:e,headers:this.header});let{beforeParse:r,json:o}=s;r&&o&&(n=r(o.values));for(let t=0,e=n.length;t<e;t++){i=n[t],this.header[t]=s.firstRowAsNames?`${i.shift()}`:sS();for(let e=0,s=i.length;e<s;++e){var l;let s=i[e];l=s,"[object Date]"===Object.prototype.toString.call(l)&&(s=s.getTime()),n[t][e]=s}}return this.emit({type:"afterParse",columns:n,detail:e,headers:this.header}),em.getColumnsCollection(n,this.header)}}sM.defaultOptions={...ew.defaultOptions},ew.registerType("GoogleSheets",sM);let{merge:sN,pick:sL,fireEvent:sO}=B;class sR extends eu{constructor(t){let e=sN(sR.defaultOptions,t);super(e),this.options=e}emit(t){sO(this,t.type,t)}load(t){let e=this,i=e.options,{dataRefreshRate:s,enablePolling:n,googleAPIKey:r,googleSpreadsheetKey:o,dataTables:l}=i,a=sR.buildFetchURL(r,o,i);if(e.emit({type:"load",detail:t,url:a}),!URL.canParse(a))throw Error("Invalid URL: "+a);return fetch(a,{signal:e?.pollingController?.signal}).then(t=>t.json()).then(t=>{if("object"==typeof t&&t&&"object"==typeof t.error&&t.error&&"number"==typeof t.error.code&&"string"==typeof t.error.message&&"string"==typeof t.error.status)throw Error(t.error.message);return this.initConverters(t,t=>{let{firstRowAsNames:e=i.firstRowAsNames,beforeParse:s=i.beforeParse}=l?.find(e=>e.key===t)||{};return new sM({firstRowAsNames:e,beforeParse:s})},(t,e)=>t.parse({json:e})),e.applyTableModifiers()}).then(()=>(e.emit({type:"afterLoad",detail:t,url:a}),n&&setTimeout(()=>e.load(),1e3*Math.max(s||0,1)),e)).catch(i=>{throw e.emit({type:"loadError",detail:t,error:i}),i})}}sR.defaultOptions={id:"google-sheets-connector",type:"GoogleSheets",googleAPIKey:"",googleSpreadsheetKey:"",enablePolling:!1,dataRefreshRate:2,firstRowAsNames:!0},function(t){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function i(t={}){let{endColumn:s,endRow:n,googleSpreadsheetRange:r,startColumn:o,startRow:l}=t;return r||(e[o||0]||"A")+(Math.max(l||0,0)+1)+":"+(e[sL(s,25)]||"Z")+(n?Math.max(n,0):"Z")}t.buildFetchURL=function(t,e,s={}){let n=new URL(`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/`),r=s.onlyColumnIds?"A1:Z1":i(s);n.pathname+=r;let o=n.searchParams;return o.set("alt","json"),s.onlyColumnIds||(o.set("dateTimeRenderOption","FORMATTED_STRING"),o.set("majorDimension","COLUMNS"),o.set("valueRenderOption","UNFORMATTED_VALUE")),o.set("prettyPrint","false"),o.set("key",t),n.href},t.buildQueryRange=i}(sR||(sR={})),eu.registerType("GoogleSheets",sR);let{merge:sA}=B;class sI extends ew{constructor(t){let e=sA(sI.defaultOptions,t);super(e),this.headers=[],this.options=e,e.tableElement&&(this.tableElement=e.tableElement,this.tableElementID=e.tableElement.id)}export(t,e=this.options){let i=!1!==e.firstRowAsNames,s=e.useMultiLevelHeaders,n=t.getSortedColumns(),r=Object.keys(n),o=[],l=r.length,a=[],h="";if(i){let t=[];if(s){for(let e of r){let i=n[e];Array.isArray(i)||(i=Array.from(i));let s=(i.shift()||"").toString();n[e]=i,t.push(s)}h=this.getTableHeaderHTML(r,t,e)}else h=this.getTableHeaderHTML(void 0,r,e)}for(let t=0;t<l;t++){let e=n[r[t]],i=e.length;for(let s=0;s<i;s++){let i=e[s];a[s]||(a[s]=[]),"string"!=typeof i&&"number"!=typeof i&&void 0!==i&&(i=(i||"").toString()),a[s][t]=this.getCellHTMLFromValue(t?"td":"th",null,t?"":'scope="row"',i),t===l-1&&o.push("<tr>"+a[s].join("")+"</tr>")}}let d="";return e.tableCaption&&(d='<caption class="highcharts-table-caption">'+e.tableCaption+"</caption>"),"<table>"+d+h+"<tbody>"+o.join("")+"</tbody></table>"}getCellHTMLFromValue(t,e,i,s,n){let r=s,o="text"+(e?" "+e:"");return"number"==typeof r?(r=r.toString(),","===n&&(r=r.replace(".",n)),o="number"):s||(r="",o="empty"),"<"+t+(i?" "+i:"")+' class="'+o+'">'+r+"</"+t+">"}getTableHeaderHTML(t=[],e=[],i=this.options){let{useMultiLevelHeaders:s,useRowspanHeaders:n}=i,r="<thead>",o=0,l=e&&e.length,a,h=0,d;if(s&&t&&e&&!function(t,e){let i=t.length;if(e.length!==i)return!1;for(;--i;)if(t[i]!==e[i])return!1;return!0}(t,e)){for(r+="<tr>";o<l;++o)(a=t[o])===t[o+1]?++h:h?(r+=this.getCellHTMLFromValue("th","highcharts-table-topheading",'scope="col" colspan="'+(h+1)+'"',a),h=0):(a===e[o]?n?(d=2,e.splice(o,1)):(d=1,e[o]=""):d=1,r+=this.getCellHTMLFromValue("th","highcharts-table-topheading",'scope="col"'+(d>1?' valign="top" rowspan="'+d+'"':""),a));r+="</tr>"}if(e){for(r+="<tr>",o=0,l=e.length;o<l;++o)void 0!==e[o]&&(r+=this.getCellHTMLFromValue("th",null,'scope="col"',e[o]));r+="</tr>"}return r+"</thead>"}parse(t,e){let i=[],s=[],n=sA(this.options,t),{endRow:r,startColumn:o,endColumn:l,firstRowAsNames:a}=n,h=n.tableElement||this.tableElement;if(!(h instanceof HTMLElement))return this.emit({type:"parseError",columns:i,detail:e,headers:s,error:"Not a valid HTML Table"}),{};this.tableElement=h,this.tableElementID=h.id,this.emit({type:"parse",columns:i,detail:e,headers:this.headers});let d=h.getElementsByTagName("tr"),u=d.length,c=0,m,{startRow:p}=n;if(a&&u){let t=d[0].children,e=t.length;for(let i=o;i<e&&!(i>l);i++)("TD"===(m=t[i]).tagName||"TH"===m.tagName)&&s.push(m.innerHTML);p++}for(;c<u;){if(c>=p&&c<=r){let t=d[c].children,e=t.length,s=0;for(;s<e;){let e=s-o,n=i[e];if(("TD"===(m=t[s]).tagName||"TH"===m.tagName)&&s>=o&&s<=l){i[e]||(i[e]=[]);let t=this.convertByType(m.innerHTML);t instanceof Date&&(t=t.getTime()),i[e][c-p]=t;let s=1;for(;c-p>=s&&void 0===n[c-p-s];)n[c-p-s]=null,s++}s++}}c++}return this.headers=s,this.emit({type:"afterParse",columns:i,detail:e,headers:s}),em.getColumnsCollection(i,this.headers)}}sI.defaultOptions={...ew.defaultOptions,useRowspanHeaders:!0,useMultiLevelHeaders:!0,startColumn:0,endColumn:Number.MAX_VALUE,startRow:0,endRow:Number.MAX_VALUE},ew.registerType("HTMLTable",sI);let{win:sP}=m,{merge:sD}=B;class sk extends eu{constructor(t){let e=sD(sk.defaultOptions,t);super(e),this.options=e,this.converter=new sI(e)}async load(t){let e,i=this.options,s=this.converter,n=this.getTable(),r=i.htmlTable;if(this.emit({type:"load",detail:t}),"string"==typeof r?(this.tableID=r,e=sP.document.getElementById(r)):(e=r,this.tableID=e.id),this.tableElement=e||void 0,!this.tableElement){let e="HTML table not provided, or element with ID not found";return this.emit({type:"loadError",detail:t,error:e}),Promise.reject(Error(e))}let o=s.parse(sD({tableElement:this.tableElement},i),t);return n.deleteColumns(),n.setColumns(o),await this.applyTableModifiers(),this.emit({type:"afterLoad",detail:t}),this}}sk.defaultOptions={id:"HTML-table-connector",type:"HTMLTable",htmlTable:""},eu.registerType("HTMLTable",sk);let{error:sH,isArray:sz,merge:sB,objectEach:sF}=B;class sW extends ew{constructor(t){let e=sB(sW.defaultOptions,t);super(e),this.headerColumnIds=[],this.headers=[],this.options=e}parse(t,e){let{beforeParse:i,orientation:s,firstRowAsNames:n,columnIds:r}=t=sB(this.options,t),o=t.data;if(!o)return{};this.headers=[];let l=[];return this.emit({type:"parse",columns:l,detail:e,headers:this.headers}),i&&(o=i(o)),o=o.slice(),"columns"===s?this.parseColumnsOrientation(l,o,n,r):"rows"===s&&this.parseRowsOrientation(l,o,n,r),this.emit({type:"afterParse",columns:l,detail:e,headers:this.headers}),em.getColumnsCollection(l,this.headers)}parseColumnsOrientation(t,e,i,s){for(let n=0,r=e.length;n<r;n++){let r=e[n];if(!Array.isArray(r))return;Array.isArray(this.headers)?(i?this.headers.push(`${r.shift()}`):s&&Array.isArray(s)&&this.headers.push(s[n]),t.push(r)):sH("JSONConverter: Invalid `columnIds` option.",!1)}}parseRowsOrientation(t,e,i,s){i?this.headers=e.shift():s&&(this.headerColumnIds=s);for(let n=0,r=e.length;n<r;n++){let r=e[n];sz(r)||(r=this.convertItemToRow(r,s));for(let e=0,s=r.length;e<s;e++)t.length<e+1&&t.push([]),t[e].push(r[e]),i||0!==n||(Array.isArray(this.headerColumnIds)?this.headers.push(this.headerColumnIds[e]||e.toString()):sH("JSONConverter: Invalid `columnIds` option.",!1))}}convertItemToRow(t,e){let i=this;if(e&&!Array.isArray(e)){let s=[];return sF(e,(e,n)=>{s.push(e.reduce((t,e)=>t[e],t)),0>i.headers.indexOf(n)&&i.headers.push(n)}),s}return i.headerColumnIds=Object.keys(t),Object.values(t)}}sW.defaultOptions={...ew.defaultOptions,orientation:"rows"},ew.registerType("JSON",sW);let{merge:sj,fireEvent:sU}=B;class sq extends eu{constructor(t){let e=sj(sq.defaultOptions,t);super(e),this.options=e,e.enablePolling&&this.startPolling(1e3*Math.max(e.dataRefreshRate||0,1))}emit(t){sU(this,t.type,t)}load(t){let e=this,i=e.options,{data:s,dataUrl:n,dataTables:r}=i;return e.emit({type:"load",detail:t,data:s}),Promise.resolve(n?fetch(n,{signal:e?.pollingController?.signal}).then(t=>t.json()).catch(i=>{e.emit({type:"loadError",detail:t,error:i}),console.warn(`Unable to fetch data from ${n}.`)}):s||[]).then(async t=>(t&&this.initConverters(t,e=>{let{columnIds:s=i.columnIds,firstRowAsNames:n=i.firstRowAsNames,orientation:o=i.orientation,beforeParse:l=i.beforeParse}=r?.find(t=>t.key===e)||{};return new sW({data:t,columnIds:s,firstRowAsNames:n,orientation:o,beforeParse:l})},(t,e)=>t.parse({data:e})),e.applyTableModifiers().then(()=>t??[]))).then(i=>(e.emit({type:"afterLoad",detail:t,data:i}),e)).catch(i=>{throw e.emit({type:"loadError",detail:t,error:i}),i})}}sq.defaultOptions={type:"JSON",id:"json-connector",data:[],enablePolling:!1,dataRefreshRate:0,firstRowAsNames:!0,orientation:"rows"},eu.registerType("JSON",sq);let{merge:sY}=B;class sV extends tQ{constructor(t){super(),this.options=sY(sV.defaultOptions,t)}modifyTable(t,e){this.emit({type:"modify",detail:e,table:t});let i=t.getModified();if(t.hasColumns(["columnIds"])){let e=(t.deleteColumns(["columnIds"])||{}).columnIds||[],s={},n=[];for(let t=0,i=e.length;t<i;++t)n.push(""+e[t]);for(let e=0,i=t.getRowCount(),r;e<i;++e)(r=t.getRow(e))&&(s[n[e]]=r);i.deleteColumns(),i.setColumns(s)}else{let e={};for(let i=0,s=t.getRowCount(),n;i<s;++i)(n=t.getRow(i))&&(e[`${i}`]=n);e.columnIds=t.getColumnIds(),i.deleteColumns(),i.setColumns(e)}return this.emit({type:"afterModify",detail:e,table:t}),t}}sV.defaultOptions={type:"Invert"},tQ.registerType("Invert",sV),eS.AST=J,eS.DataConnector=eu,eS.DataCursor=ev,eS.DataConverter=ew,eS.Grid=sa,eS.grid=sa.grid,eS.grids=sa.grids,eS.ColumnResizing=tG,eS.DataModifier=tQ,eS.DataPool=sc,eS.DataTable=er,eS.defaultOptions=eH.defaultOptions,eS.isHighContrastModeActive=ex.isHighContrastModeActive,eS.Templating=tW,eS.product="Grid Lite",eS.setOptions=eH.setOptions,eS.merge=B.merge,eS.SvgIcons=eX,eS.Table=eS.Table||iF,eS.Pagination=eS.Pagination||i8,sw.compose(eS.Grid,eS.Table),eS.win.Grid||(eS.win.Grid=eS);let s$=eS;return c.default})());